{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Lisp/Desktop/items/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addusermessage } from \"@/api/users\";\nimport UpdateName from \"./components/updateName.vue\";\nimport UpdateGender from \"./components/updateGender.vue\";\nimport UpdateBirthday from \"./components/updateBirthday.vue\";\nexport default {\n  name: \"user-profile\",\n  components: {\n    UpdateName: UpdateName,\n    UpdateGender: UpdateGender,\n    UpdateBirthday: UpdateBirthday\n  },\n  data: function data() {\n    return {\n      profile: {},\n      isnameshow: false,\n      sigendershow: false,\n      isBirthdayshow: false,\n      isPhotoShow: false\n    };\n  },\n  created: function created() {\n    this.getUserProfile();\n  },\n  methods: {\n    getUserProfile: function getUserProfile() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _yield$addusermessage, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return addusermessage();\n\n              case 3:\n                _yield$addusermessage = _context.sent;\n                data = _yield$addusermessage.data;\n                _this.profile = data.data;\n                _context.next = 10;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 8]]);\n      }))();\n    },\n    onFileChange: function onFileChange() {\n      var files = this.$refs.filePhoto.files[0];\n      var url = window.URL.createObjectURL(files);\n      console.log(url);\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AAEA;AACA;AACA;AAEA;AACAA,sBADA;AAEAC;AACAC,0BADA;AAEAC,8BAFA;AAGAC;AAHA,GAFA;AAOAC,MAPA,kBAOA;AACA;AACAC,iBADA;AAEAC,uBAFA;AAGAC,yBAHA;AAIAC,2BAJA;AAKAC;AALA;AAOA,GAfA;AAgBAC,SAhBA,qBAgBA;AACA;AACA,GAlBA;AAmBAC;AACAC,kBADA,4BACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEAC,gBAFA;;AAAA;AAAA;AAEAT,oBAFA,yBAEAA,IAFA;AAGA;AAHA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA,KANA;AAOAU,gBAPA,0BAOA;AACA;AACA;AACAC;AACA;AAXA;AAnBA","names":["name","components","UpdateName","UpdateGender","UpdateBirthday","data","profile","isnameshow","sigendershow","isBirthdayshow","isPhotoShow","created","methods","getUserProfile","addusermessage","onFileChange","console"],"sourceRoot":"src/views/userProfile","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-profile\">\r\n    <van-nav-bar\r\n      class=\"page-nav-bar\"\r\n      title=\"个人信息\"\r\n      left-arrow\r\n      @click-left=\"$router.back()\"\r\n    />\r\n\r\n    <van-cell title=\"头像\" is-link @click=\"$refs.filePhoto.click()\">\r\n      <van-image class=\"avatar\" fit=\"cover\" round :src=\"profile.photo\" />\r\n    </van-cell>\r\n\r\n    <!-- // 头像图片  -->\r\n    <input type=\"file\" hidden ref=\"filePhoto\"  @change=\"onFileChange\">\r\n\r\n    <!-- 头像图片预览和裁切 popup -->\r\n\r\n    <van-popup\r\n        v-model=\"isPhotoShow\"\r\n        style=\"height:100%\"\r\n    >\r\n    </van-popup>\r\n\r\n\r\n    <van-cell\r\n      @click=\"isnameshow = true\"\r\n      title=\"昵称\"\r\n      :value=\"profile.name\"\r\n      is-link\r\n    />\r\n\r\n    <!-- 编辑昵称 -->\r\n    <van-popup v-model=\"isnameshow\" style=\"height: 40%\" position=\"bottom\">\r\n      <UpdateName\r\n        v-if=\"isnameshow\"\r\n        @changename=\"isnameshow = false\"\r\n        v-model=\"profile.name\"\r\n      ></UpdateName>\r\n    </van-popup>\r\n    <!-- / 编辑昵称 -->\r\n\r\n    <van-cell\r\n      @click=\"sigendershow = true\"\r\n      title=\"性别\"\r\n      :value=\"profile.gender == 0 ? '男' : '女'\"\r\n      is-link\r\n    />\r\n\r\n    <!-- 编辑性别 -->\r\n    <van-popup v-model=\"sigendershow\" position=\"bottom\">\r\n      <UpdateGender\r\n        v-if=\"sigendershow\"\r\n        @close=\"sigendershow=false\"\r\n        v-model=\"profile.gender\"\r\n      ></UpdateGender>\r\n    </van-popup>\r\n    <!-- / 编辑性别 -->\r\n\r\n    <van-cell @click=\"isBirthdayshow=true\" title=\"生日\" :value=\"profile.birthday\" is-link />\r\n\r\n    <!-- 编辑出生日期 -->\r\n    <van-popup v-model=\"isBirthdayshow\" position=\"bottom\">\r\n      <UpdateBirthday\r\n        v-if=\"isBirthdayshow\"\r\n        @close=\"isBirthdayshow=false\"\r\n        v-model=\"profile.birthday\"\r\n      ></UpdateBirthday>\r\n    </van-popup>\r\n    <!-- / 编辑出生日期 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addusermessage } from \"@/api/users\";\r\n\r\nimport UpdateName from \"./components/updateName.vue\";\r\nimport UpdateGender from \"./components/updateGender.vue\";\r\nimport UpdateBirthday from \"./components/updateBirthday.vue\"\r\n\r\nexport default {\r\n  name: \"user-profile\",\r\n  components: {\r\n    UpdateName,\r\n    UpdateGender,\r\n    UpdateBirthday\r\n  },\r\n  data() {\r\n    return {\r\n      profile: {},\r\n      isnameshow: false,\r\n      sigendershow: false,\r\n      isBirthdayshow:false,\r\n      isPhotoShow:false\r\n    };\r\n  },\r\n  created() {\r\n    this.getUserProfile();\r\n  },\r\n  methods: {\r\n    async getUserProfile() {\r\n      try {\r\n        let { data } = await addusermessage();\r\n        this.profile = data.data;\r\n      } catch (err) {}\r\n    },\r\n    onFileChange(){\r\n        let files = this.$refs.filePhoto.files[0]\r\n        let url = window.URL.createObjectURL(files)\r\n        console.log(url);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.user-profile {\r\n  .avatar {\r\n    width: 60px;\r\n    height: 60px;\r\n  }\r\n  .van-popup {\r\n    background-color: #f5f7f9;\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}