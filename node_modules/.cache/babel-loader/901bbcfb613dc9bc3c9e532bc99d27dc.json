{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Lisp/Desktop/items/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addComment } from \"@/api/comment\";\nexport default {\n  name: 'CommentPost',\n  components: {},\n  props: {\n    id: {\n      require: true\n    }\n  },\n  data: function data() {\n    return {\n      message: ''\n    };\n  },\n  methods: {\n    onPost: function onPost() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _yield$addComment, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return addComment({\n                  target: _this.id,\n                  // 文章 id 或者 评论 id\n                  content: _this.message,\n                  art_id: null // 回复评论的 评论id， 回复文章不需要传\n\n                });\n\n              case 3:\n                _yield$addComment = _context.sent;\n                data = _yield$addComment.data.data;\n                //   console.log(data);\n                _this.message = \"\";\n\n                _this.$emit(\"post-succes\", data);\n\n                _this.$toast.success(\"发布成功\");\n\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n\n                _this.$toast.fail(\"发布失败，请稍后重试\");\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 10]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AAEA;AACAA,qBADA;AAEAC,gBAFA;AAGAC;AACAC;AACAC;AADA;AADA,GAHA;AAQAC,MARA,kBAQA;AACA;AACAC;AADA;AAGA,GAZA;AAaAC;AACAC,UADA,oBACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEAC;AACAC,kCADA;AACA;AACAC,wCAFA;AAGAC,8BAHA,CAGA;;AAHA,kBAFA;;AAAA;AAAA;AAEAP,oBAFA,qBAEAA,IAFA,CAEAA,IAFA;AAOA;AACA;;AACA;;AACA;;AAVA;AAAA;;AAAA;AAAA;AAAA;;AAYA;;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAfA;AAbA","names":["name","components","props","id","require","data","message","methods","onPost","addComment","target","content","art_id"],"sourceRoot":"src/components/comment-list","sources":["comment-post.vue"],"sourcesContent":["<template>\r\n  <div class=\"comment-post\">\r\n    <van-field\r\n      class=\"post-field\"\r\n      v-model=\"message\"\r\n      rows=\"2\"\r\n      autosize\r\n      type=\"textarea\"\r\n      maxlength=\"50\"\r\n      placeholder=\"请输入留言\"\r\n      show-word-limit\r\n    />\r\n    <van-button\r\n      class=\"post-btn\"\r\n      @click=\"onPost\"\r\n    >发布</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {  addComment} from \"@/api/comment\"\r\n\r\nexport default {\r\n  name: 'CommentPost',\r\n  components: {},\r\n  props: {\r\n      id:{\r\n          require:true\r\n      }\r\n  },\r\n  data () {\r\n    return {\r\n      message: ''\r\n    }\r\n  },\r\n  methods: {\r\n      async onPost(){\r\n          try{\r\n              let { data:{data} } = await addComment({\r\n                  target:this.id, // 文章 id 或者 评论 id\r\n                  content:this.message,\r\n                  art_id:null, // 回复评论的 评论id， 回复文章不需要传\r\n              })\r\n            //   console.log(data);\r\n              this.message = \"\"\r\n              this.$emit(\"post-succes\",data)\r\n              this.$toast.success(\"发布成功\")\r\n          }catch(err){\r\n              this.$toast.fail(\"发布失败，请稍后重试\")\r\n          }\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.comment-post {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 32px 0 32px 32px;\r\n  .post-field {\r\n    background-color: #f5f7f9;\r\n  }\r\n  .post-btn {\r\n    width: 150px;\r\n    border: none;\r\n    padding: 0;\r\n    color: #6ba3d8;\r\n    &::before {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}