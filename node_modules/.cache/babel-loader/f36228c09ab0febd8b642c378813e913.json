{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\n// Utils\nimport { createNamespace } from '../utils';\nimport { isHidden } from '../utils/dom/style';\nimport { getScroller } from '../utils/dom/scroll'; // Mixins\n\nimport { BindEventMixin } from '../mixins/bind-event'; // Components\n\nimport Loading from '../loading';\n\nvar _createNamespace = createNamespace('list'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nexport default createComponent({\n  mixins: [BindEventMixin(function (bind) {\n    if (!this.scroller) {\n      this.scroller = getScroller(this.$el);\n    }\n\n    bind(this.scroller, 'scroll', this.check);\n  })],\n  model: {\n    prop: 'loading'\n  },\n  props: {\n    error: Boolean,\n    loading: Boolean,\n    finished: Boolean,\n    errorText: String,\n    loadingText: String,\n    finishedText: String,\n    immediateCheck: {\n      type: Boolean,\n      default: true\n    },\n    offset: {\n      type: [Number, String],\n      default: 300\n    },\n    direction: {\n      type: String,\n      default: 'down'\n    }\n  },\n  data: function data() {\n    return {\n      // use sync innerLoading state to avoid repeated loading in some edge cases\n      innerLoading: this.loading\n    };\n  },\n  updated: function updated() {\n    this.innerLoading = this.loading;\n  },\n  mounted: function mounted() {\n    if (this.immediateCheck) {\n      this.check();\n    }\n  },\n  watch: {\n    loading: 'check',\n    finished: 'check'\n  },\n  methods: {\n    // @exposed-api\n    check: function check() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        if (_this.innerLoading || _this.finished || _this.error) {\n          return;\n        }\n\n        var el = _this.$el,\n            scroller = _this.scroller,\n            offset = _this.offset,\n            direction = _this.direction;\n        var scrollerRect;\n\n        if (scroller.getBoundingClientRect) {\n          scrollerRect = scroller.getBoundingClientRect();\n        } else {\n          scrollerRect = {\n            top: 0,\n            bottom: scroller.innerHeight\n          };\n        }\n\n        var scrollerHeight = scrollerRect.bottom - scrollerRect.top;\n        /* istanbul ignore next */\n\n        if (!scrollerHeight || isHidden(el)) {\n          return false;\n        }\n\n        var isReachEdge = false;\n\n        var placeholderRect = _this.$refs.placeholder.getBoundingClientRect();\n\n        if (direction === 'up') {\n          isReachEdge = scrollerRect.top - placeholderRect.top <= offset;\n        } else {\n          isReachEdge = placeholderRect.bottom - scrollerRect.bottom <= offset;\n        }\n\n        if (isReachEdge) {\n          _this.innerLoading = true;\n\n          _this.$emit('input', true);\n\n          _this.$emit('load');\n        }\n      });\n    },\n    clickErrorText: function clickErrorText() {\n      this.$emit('update:error', false);\n      this.check();\n    },\n    genLoading: function genLoading() {\n      var h = this.$createElement;\n\n      if (this.innerLoading && !this.finished) {\n        return h(\"div\", {\n          \"key\": \"loading\",\n          \"class\": bem('loading')\n        }, [this.slots('loading') || h(Loading, {\n          \"attrs\": {\n            \"size\": \"16\"\n          }\n        }, [this.loadingText || t('loading')])]);\n      }\n    },\n    genFinishedText: function genFinishedText() {\n      var h = this.$createElement;\n\n      if (this.finished) {\n        var text = this.slots('finished') || this.finishedText;\n\n        if (text) {\n          return h(\"div\", {\n            \"class\": bem('finished-text')\n          }, [text]);\n        }\n      }\n    },\n    genErrorText: function genErrorText() {\n      var h = this.$createElement;\n\n      if (this.error) {\n        var text = this.slots('error') || this.errorText;\n\n        if (text) {\n          return h(\"div\", {\n            \"on\": {\n              \"click\": this.clickErrorText\n            },\n            \"class\": bem('error-text')\n          }, [text]);\n        }\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var Placeholder = h(\"div\", {\n      \"ref\": \"placeholder\",\n      \"key\": \"placeholder\",\n      \"class\": bem('placeholder')\n    });\n    return h(\"div\", {\n      \"class\": bem(),\n      \"attrs\": {\n        \"role\": \"feed\",\n        \"aria-busy\": this.innerLoading\n      }\n    }, [this.direction === 'down' ? this.slots() : Placeholder, this.genLoading(), this.genFinishedText(), this.genErrorText(), this.direction === 'up' ? this.slots() : Placeholder]);\n  }\n});","map":{"version":3,"sources":["C:/Users/Lisp/Desktop/items/node_modules/vant/es/list/index.js"],"names":["createNamespace","isHidden","getScroller","BindEventMixin","Loading","_createNamespace","createComponent","bem","t","mixins","bind","scroller","$el","check","model","prop","props","error","Boolean","loading","finished","errorText","String","loadingText","finishedText","immediateCheck","type","default","offset","Number","direction","data","innerLoading","updated","mounted","watch","methods","_this","$nextTick","el","scrollerRect","getBoundingClientRect","top","bottom","innerHeight","scrollerHeight","isReachEdge","placeholderRect","$refs","placeholder","$emit","clickErrorText","genLoading","h","$createElement","slots","genFinishedText","text","genErrorText","render","arguments","Placeholder"],"mappings":"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","sourcesContent":["// Utils\nimport { createNamespace } from '../utils';\nimport { isHidden } from '../utils/dom/style';\nimport { getScroller } from '../utils/dom/scroll'; // Mixins\n\nimport { BindEventMixin } from '../mixins/bind-event'; // Components\n\nimport Loading from '../loading';\n\nvar _createNamespace = createNamespace('list'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nexport default createComponent({\n  mixins: [BindEventMixin(function (bind) {\n    if (!this.scroller) {\n      this.scroller = getScroller(this.$el);\n    }\n\n    bind(this.scroller, 'scroll', this.check);\n  })],\n  model: {\n    prop: 'loading'\n  },\n  props: {\n    error: Boolean,\n    loading: Boolean,\n    finished: Boolean,\n    errorText: String,\n    loadingText: String,\n    finishedText: String,\n    immediateCheck: {\n      type: Boolean,\n      default: true\n    },\n    offset: {\n      type: [Number, String],\n      default: 300\n    },\n    direction: {\n      type: String,\n      default: 'down'\n    }\n  },\n  data: function data() {\n    return {\n      // use sync innerLoading state to avoid repeated loading in some edge cases\n      innerLoading: this.loading\n    };\n  },\n  updated: function updated() {\n    this.innerLoading = this.loading;\n  },\n  mounted: function mounted() {\n    if (this.immediateCheck) {\n      this.check();\n    }\n  },\n  watch: {\n    loading: 'check',\n    finished: 'check'\n  },\n  methods: {\n    // @exposed-api\n    check: function check() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        if (_this.innerLoading || _this.finished || _this.error) {\n          return;\n        }\n\n        var el = _this.$el,\n            scroller = _this.scroller,\n            offset = _this.offset,\n            direction = _this.direction;\n        var scrollerRect;\n\n        if (scroller.getBoundingClientRect) {\n          scrollerRect = scroller.getBoundingClientRect();\n        } else {\n          scrollerRect = {\n            top: 0,\n            bottom: scroller.innerHeight\n          };\n        }\n\n        var scrollerHeight = scrollerRect.bottom - scrollerRect.top;\n        /* istanbul ignore next */\n\n        if (!scrollerHeight || isHidden(el)) {\n          return false;\n        }\n\n        var isReachEdge = false;\n\n        var placeholderRect = _this.$refs.placeholder.getBoundingClientRect();\n\n        if (direction === 'up') {\n          isReachEdge = scrollerRect.top - placeholderRect.top <= offset;\n        } else {\n          isReachEdge = placeholderRect.bottom - scrollerRect.bottom <= offset;\n        }\n\n        if (isReachEdge) {\n          _this.innerLoading = true;\n\n          _this.$emit('input', true);\n\n          _this.$emit('load');\n        }\n      });\n    },\n    clickErrorText: function clickErrorText() {\n      this.$emit('update:error', false);\n      this.check();\n    },\n    genLoading: function genLoading() {\n      var h = this.$createElement;\n\n      if (this.innerLoading && !this.finished) {\n        return h(\"div\", {\n          \"key\": \"loading\",\n          \"class\": bem('loading')\n        }, [this.slots('loading') || h(Loading, {\n          \"attrs\": {\n            \"size\": \"16\"\n          }\n        }, [this.loadingText || t('loading')])]);\n      }\n    },\n    genFinishedText: function genFinishedText() {\n      var h = this.$createElement;\n\n      if (this.finished) {\n        var text = this.slots('finished') || this.finishedText;\n\n        if (text) {\n          return h(\"div\", {\n            \"class\": bem('finished-text')\n          }, [text]);\n        }\n      }\n    },\n    genErrorText: function genErrorText() {\n      var h = this.$createElement;\n\n      if (this.error) {\n        var text = this.slots('error') || this.errorText;\n\n        if (text) {\n          return h(\"div\", {\n            \"on\": {\n              \"click\": this.clickErrorText\n            },\n            \"class\": bem('error-text')\n          }, [text]);\n        }\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var Placeholder = h(\"div\", {\n      \"ref\": \"placeholder\",\n      \"key\": \"placeholder\",\n      \"class\": bem('placeholder')\n    });\n    return h(\"div\", {\n      \"class\": bem(),\n      \"attrs\": {\n        \"role\": \"feed\",\n        \"aria-busy\": this.innerLoading\n      }\n    }, [this.direction === 'down' ? this.slots() : Placeholder, this.genLoading(), this.genFinishedText(), this.genErrorText(), this.direction === 'up' ? this.slots() : Placeholder]);\n  }\n});"]},"metadata":{},"sourceType":"module"}