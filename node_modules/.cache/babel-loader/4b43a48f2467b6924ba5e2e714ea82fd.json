{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport _mergeJSXProps2 from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport { deepClone } from '../utils/deep-clone';\nimport { createNamespace, inBrowser, isObject } from '../utils';\nimport { range } from '../utils/format/number';\nimport { preventDefault, on, off } from '../utils/dom/event';\nimport { TouchMixin } from '../mixins/touch';\nvar DEFAULT_DURATION = 200; // 惯性滑动思路:\n// 在手指离开屏幕时，如果和上一次 move 时的间隔小于 `MOMENTUM_LIMIT_TIME` 且 move\n// 距离大于 `MOMENTUM_LIMIT_DISTANCE` 时，执行惯性滑动\n\nexport var MOMENTUM_LIMIT_TIME = 300;\nexport var MOMENTUM_LIMIT_DISTANCE = 15;\n\nvar _createNamespace = createNamespace('picker-column'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nfunction getElementTranslateY(element) {\n  var style = window.getComputedStyle(element);\n  var transform = style.transform || style.webkitTransform;\n  var translateY = transform.slice(7, transform.length - 1).split(', ')[5];\n  return Number(translateY);\n}\n\nfunction isOptionDisabled(option) {\n  return isObject(option) && option.disabled;\n} // use standard WheelEvent:\n// https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n\n\nvar supportMousewheel = inBrowser && 'onwheel' in window;\nvar mousewheelTimer = null;\nexport default createComponent({\n  mixins: [TouchMixin],\n  props: {\n    valueKey: String,\n    readonly: Boolean,\n    allowHtml: Boolean,\n    className: String,\n    itemHeight: Number,\n    defaultIndex: Number,\n    swipeDuration: [Number, String],\n    visibleItemCount: [Number, String],\n    initialOptions: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      offset: 0,\n      duration: 0,\n      options: deepClone(this.initialOptions),\n      currentIndex: this.defaultIndex\n    };\n  },\n  created: function created() {\n    if (this.$parent.children) {\n      this.$parent.children.push(this);\n    }\n\n    this.setIndex(this.currentIndex);\n  },\n  mounted: function mounted() {\n    this.bindTouchEvent(this.$el);\n\n    if (supportMousewheel) {\n      on(this.$el, 'wheel', this.onMouseWheel, false);\n    }\n  },\n  destroyed: function destroyed() {\n    var children = this.$parent.children;\n\n    if (children) {\n      children.splice(children.indexOf(this), 1);\n    }\n\n    if (supportMousewheel) {\n      off(this.$el, 'wheel');\n    }\n  },\n  watch: {\n    initialOptions: 'setOptions',\n    defaultIndex: function defaultIndex(val) {\n      this.setIndex(val);\n    }\n  },\n  computed: {\n    count: function count() {\n      return this.options.length;\n    },\n    baseOffset: function baseOffset() {\n      return this.itemHeight * (this.visibleItemCount - 1) / 2;\n    }\n  },\n  methods: {\n    setOptions: function setOptions(options) {\n      if (JSON.stringify(options) !== JSON.stringify(this.options)) {\n        this.options = deepClone(options);\n        this.setIndex(this.defaultIndex);\n      }\n    },\n    onTouchStart: function onTouchStart(event) {\n      if (this.readonly) {\n        return;\n      }\n\n      this.touchStart(event);\n\n      if (this.moving) {\n        var translateY = getElementTranslateY(this.$refs.wrapper);\n        this.offset = Math.min(0, translateY - this.baseOffset);\n        this.startOffset = this.offset;\n      } else {\n        this.startOffset = this.offset;\n      }\n\n      this.duration = 0;\n      this.transitionEndTrigger = null;\n      this.touchStartTime = Date.now();\n      this.momentumOffset = this.startOffset;\n    },\n    onTouchMove: function onTouchMove(event) {\n      if (this.readonly) {\n        return;\n      }\n\n      this.touchMove(event);\n\n      if (this.direction === 'vertical') {\n        this.moving = true;\n        preventDefault(event, true);\n      }\n\n      this.offset = range(this.startOffset + this.deltaY, -(this.count * this.itemHeight), this.itemHeight);\n      var now = Date.now();\n\n      if (now - this.touchStartTime > MOMENTUM_LIMIT_TIME) {\n        this.touchStartTime = now;\n        this.momentumOffset = this.offset;\n      }\n    },\n    onTouchEnd: function onTouchEnd() {\n      var _this = this;\n\n      if (this.readonly) {\n        return;\n      }\n\n      var distance = this.offset - this.momentumOffset;\n      var duration = Date.now() - this.touchStartTime;\n      var allowMomentum = duration < MOMENTUM_LIMIT_TIME && Math.abs(distance) > MOMENTUM_LIMIT_DISTANCE;\n\n      if (allowMomentum) {\n        this.momentum(distance, duration);\n        return;\n      }\n\n      var index = this.getIndexByOffset(this.offset);\n      this.duration = DEFAULT_DURATION;\n      this.setIndex(index, true); // compatible with desktop scenario\n      // use setTimeout to skip the click event Emitted after touchstart\n\n      setTimeout(function () {\n        _this.moving = false;\n      }, 0);\n    },\n    onMouseWheel: function onMouseWheel(event) {\n      var _this2 = this;\n\n      if (this.readonly) {\n        return;\n      }\n\n      preventDefault(event, true); // simply combine touchstart and touchmove\n\n      var translateY = getElementTranslateY(this.$refs.wrapper);\n      this.startOffset = Math.min(0, translateY - this.baseOffset);\n      this.momentumOffset = this.startOffset;\n      this.transitionEndTrigger = null; // directly use deltaY, see https://caniuse.com/?search=deltaY\n      // use deltaY to detect direction for not special setting device\n      // https://developer.mozilla.org/en-US/docs/Web/API/Element/wheel_event\n\n      var deltaY = event.deltaY;\n\n      if (this.startOffset === 0 && deltaY < 0) {\n        return;\n      } // get offset\n      // if necessary, can adjust distance value to make scrolling smoother\n\n\n      var distance = -deltaY;\n      this.offset = range(this.startOffset + distance, -(this.count * this.itemHeight), this.itemHeight);\n\n      if (mousewheelTimer) {\n        clearTimeout(mousewheelTimer);\n      }\n\n      mousewheelTimer = setTimeout(function () {\n        _this2.onTouchEnd();\n\n        _this2.touchStartTime = 0;\n      }, MOMENTUM_LIMIT_TIME);\n    },\n    onTransitionEnd: function onTransitionEnd() {\n      this.stopMomentum();\n    },\n    onClickItem: function onClickItem(index) {\n      if (this.moving || this.readonly) {\n        return;\n      }\n\n      this.transitionEndTrigger = null;\n      this.duration = DEFAULT_DURATION;\n      this.setIndex(index, true);\n    },\n    adjustIndex: function adjustIndex(index) {\n      index = range(index, 0, this.count);\n\n      for (var i = index; i < this.count; i++) {\n        if (!isOptionDisabled(this.options[i])) return i;\n      }\n\n      for (var _i = index - 1; _i >= 0; _i--) {\n        if (!isOptionDisabled(this.options[_i])) return _i;\n      }\n    },\n    getOptionText: function getOptionText(option) {\n      if (isObject(option) && this.valueKey in option) {\n        return option[this.valueKey];\n      }\n\n      return option;\n    },\n    setIndex: function setIndex(index, emitChange) {\n      var _this3 = this;\n\n      index = this.adjustIndex(index) || 0;\n      var offset = -index * this.itemHeight;\n\n      var trigger = function trigger() {\n        if (index !== _this3.currentIndex) {\n          _this3.currentIndex = index;\n\n          if (emitChange) {\n            _this3.$emit('change', index);\n          }\n        }\n      }; // trigger the change event after transitionend when moving\n\n\n      if (this.moving && offset !== this.offset) {\n        this.transitionEndTrigger = trigger;\n      } else {\n        trigger();\n      }\n\n      this.offset = offset;\n    },\n    setValue: function setValue(value) {\n      var options = this.options;\n\n      for (var i = 0; i < options.length; i++) {\n        if (this.getOptionText(options[i]) === value) {\n          return this.setIndex(i);\n        }\n      }\n    },\n    getValue: function getValue() {\n      return this.options[this.currentIndex];\n    },\n    getIndexByOffset: function getIndexByOffset(offset) {\n      return range(Math.round(-offset / this.itemHeight), 0, this.count - 1);\n    },\n    momentum: function momentum(distance, duration) {\n      var speed = Math.abs(distance / duration);\n      distance = this.offset + speed / 0.003 * (distance < 0 ? -1 : 1);\n      var index = this.getIndexByOffset(distance);\n      this.duration = +this.swipeDuration;\n      this.setIndex(index, true);\n    },\n    stopMomentum: function stopMomentum() {\n      this.moving = false;\n      this.duration = 0;\n\n      if (this.transitionEndTrigger) {\n        this.transitionEndTrigger();\n        this.transitionEndTrigger = null;\n      }\n    },\n    genOptions: function genOptions() {\n      var _this4 = this;\n\n      var h = this.$createElement;\n      var optionStyle = {\n        height: this.itemHeight + \"px\"\n      };\n      return this.options.map(function (option, index) {\n        var _domProps;\n\n        var text = _this4.getOptionText(option);\n\n        var disabled = isOptionDisabled(option);\n        var data = {\n          style: optionStyle,\n          attrs: {\n            role: 'button',\n            tabindex: disabled ? -1 : 0\n          },\n          class: [bem('item', {\n            disabled: disabled,\n            selected: index === _this4.currentIndex\n          })],\n          on: {\n            click: function click() {\n              _this4.onClickItem(index);\n            }\n          }\n        };\n        var childData = {\n          class: 'van-ellipsis',\n          domProps: (_domProps = {}, _domProps[_this4.allowHtml ? 'innerHTML' : 'textContent'] = text, _domProps)\n        };\n        return h(\"li\", _mergeJSXProps([{}, data]), [_this4.slots('option', option) || h(\"div\", _mergeJSXProps2([{}, childData]))]);\n      });\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var wrapperStyle = {\n      transform: \"translate3d(0, \" + (this.offset + this.baseOffset) + \"px, 0)\",\n      transitionDuration: this.duration + \"ms\",\n      transitionProperty: this.duration ? 'all' : 'none'\n    };\n    return h(\"div\", {\n      \"class\": [bem(), this.className]\n    }, [h(\"ul\", {\n      \"ref\": \"wrapper\",\n      \"style\": wrapperStyle,\n      \"class\": bem('wrapper'),\n      \"on\": {\n        \"transitionend\": this.onTransitionEnd\n      }\n    }, [this.genOptions()])]);\n  }\n});","map":{"version":3,"sources":["C:/Users/Lisp/Desktop/Vue-app/items/node_modules/vant/es/picker/PickerColumn.js"],"names":["_mergeJSXProps2","_mergeJSXProps","deepClone","createNamespace","inBrowser","isObject","range","preventDefault","on","off","TouchMixin","DEFAULT_DURATION","MOMENTUM_LIMIT_TIME","MOMENTUM_LIMIT_DISTANCE","_createNamespace","createComponent","bem","getElementTranslateY","element","style","window","getComputedStyle","transform","webkitTransform","translateY","slice","length","split","Number","isOptionDisabled","option","disabled","supportMousewheel","mousewheelTimer","mixins","props","valueKey","String","readonly","Boolean","allowHtml","className","itemHeight","defaultIndex","swipeDuration","visibleItemCount","initialOptions","type","Array","default","_default","data","offset","duration","options","currentIndex","created","$parent","children","push","setIndex","mounted","bindTouchEvent","$el","onMouseWheel","destroyed","splice","indexOf","watch","val","computed","count","baseOffset","methods","setOptions","JSON","stringify","onTouchStart","event","touchStart","moving","$refs","wrapper","Math","min","startOffset","transitionEndTrigger","touchStartTime","Date","now","momentumOffset","onTouchMove","touchMove","direction","deltaY","onTouchEnd","_this","distance","allowMomentum","abs","momentum","index","getIndexByOffset","setTimeout","_this2","clearTimeout","onTransitionEnd","stopMomentum","onClickItem","adjustIndex","i","_i","getOptionText","emitChange","_this3","trigger","$emit","setValue","value","getValue","round","speed","genOptions","_this4","h","$createElement","optionStyle","height","map","_domProps","text","attrs","role","tabindex","class","selected","click","childData","domProps","slots","render","arguments","wrapperStyle","transitionDuration","transitionProperty"],"mappings":"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","sourcesContent":["import _mergeJSXProps2 from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport { deepClone } from '../utils/deep-clone';\nimport { createNamespace, inBrowser, isObject } from '../utils';\nimport { range } from '../utils/format/number';\nimport { preventDefault, on, off } from '../utils/dom/event';\nimport { TouchMixin } from '../mixins/touch';\nvar DEFAULT_DURATION = 200; // 惯性滑动思路:\n// 在手指离开屏幕时，如果和上一次 move 时的间隔小于 `MOMENTUM_LIMIT_TIME` 且 move\n// 距离大于 `MOMENTUM_LIMIT_DISTANCE` 时，执行惯性滑动\n\nexport var MOMENTUM_LIMIT_TIME = 300;\nexport var MOMENTUM_LIMIT_DISTANCE = 15;\n\nvar _createNamespace = createNamespace('picker-column'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nfunction getElementTranslateY(element) {\n  var style = window.getComputedStyle(element);\n  var transform = style.transform || style.webkitTransform;\n  var translateY = transform.slice(7, transform.length - 1).split(', ')[5];\n  return Number(translateY);\n}\n\nfunction isOptionDisabled(option) {\n  return isObject(option) && option.disabled;\n} // use standard WheelEvent:\n// https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n\n\nvar supportMousewheel = inBrowser && 'onwheel' in window;\nvar mousewheelTimer = null;\nexport default createComponent({\n  mixins: [TouchMixin],\n  props: {\n    valueKey: String,\n    readonly: Boolean,\n    allowHtml: Boolean,\n    className: String,\n    itemHeight: Number,\n    defaultIndex: Number,\n    swipeDuration: [Number, String],\n    visibleItemCount: [Number, String],\n    initialOptions: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      offset: 0,\n      duration: 0,\n      options: deepClone(this.initialOptions),\n      currentIndex: this.defaultIndex\n    };\n  },\n  created: function created() {\n    if (this.$parent.children) {\n      this.$parent.children.push(this);\n    }\n\n    this.setIndex(this.currentIndex);\n  },\n  mounted: function mounted() {\n    this.bindTouchEvent(this.$el);\n\n    if (supportMousewheel) {\n      on(this.$el, 'wheel', this.onMouseWheel, false);\n    }\n  },\n  destroyed: function destroyed() {\n    var children = this.$parent.children;\n\n    if (children) {\n      children.splice(children.indexOf(this), 1);\n    }\n\n    if (supportMousewheel) {\n      off(this.$el, 'wheel');\n    }\n  },\n  watch: {\n    initialOptions: 'setOptions',\n    defaultIndex: function defaultIndex(val) {\n      this.setIndex(val);\n    }\n  },\n  computed: {\n    count: function count() {\n      return this.options.length;\n    },\n    baseOffset: function baseOffset() {\n      return this.itemHeight * (this.visibleItemCount - 1) / 2;\n    }\n  },\n  methods: {\n    setOptions: function setOptions(options) {\n      if (JSON.stringify(options) !== JSON.stringify(this.options)) {\n        this.options = deepClone(options);\n        this.setIndex(this.defaultIndex);\n      }\n    },\n    onTouchStart: function onTouchStart(event) {\n      if (this.readonly) {\n        return;\n      }\n\n      this.touchStart(event);\n\n      if (this.moving) {\n        var translateY = getElementTranslateY(this.$refs.wrapper);\n        this.offset = Math.min(0, translateY - this.baseOffset);\n        this.startOffset = this.offset;\n      } else {\n        this.startOffset = this.offset;\n      }\n\n      this.duration = 0;\n      this.transitionEndTrigger = null;\n      this.touchStartTime = Date.now();\n      this.momentumOffset = this.startOffset;\n    },\n    onTouchMove: function onTouchMove(event) {\n      if (this.readonly) {\n        return;\n      }\n\n      this.touchMove(event);\n\n      if (this.direction === 'vertical') {\n        this.moving = true;\n        preventDefault(event, true);\n      }\n\n      this.offset = range(this.startOffset + this.deltaY, -(this.count * this.itemHeight), this.itemHeight);\n      var now = Date.now();\n\n      if (now - this.touchStartTime > MOMENTUM_LIMIT_TIME) {\n        this.touchStartTime = now;\n        this.momentumOffset = this.offset;\n      }\n    },\n    onTouchEnd: function onTouchEnd() {\n      var _this = this;\n\n      if (this.readonly) {\n        return;\n      }\n\n      var distance = this.offset - this.momentumOffset;\n      var duration = Date.now() - this.touchStartTime;\n      var allowMomentum = duration < MOMENTUM_LIMIT_TIME && Math.abs(distance) > MOMENTUM_LIMIT_DISTANCE;\n\n      if (allowMomentum) {\n        this.momentum(distance, duration);\n        return;\n      }\n\n      var index = this.getIndexByOffset(this.offset);\n      this.duration = DEFAULT_DURATION;\n      this.setIndex(index, true); // compatible with desktop scenario\n      // use setTimeout to skip the click event Emitted after touchstart\n\n      setTimeout(function () {\n        _this.moving = false;\n      }, 0);\n    },\n    onMouseWheel: function onMouseWheel(event) {\n      var _this2 = this;\n\n      if (this.readonly) {\n        return;\n      }\n\n      preventDefault(event, true); // simply combine touchstart and touchmove\n\n      var translateY = getElementTranslateY(this.$refs.wrapper);\n      this.startOffset = Math.min(0, translateY - this.baseOffset);\n      this.momentumOffset = this.startOffset;\n      this.transitionEndTrigger = null; // directly use deltaY, see https://caniuse.com/?search=deltaY\n      // use deltaY to detect direction for not special setting device\n      // https://developer.mozilla.org/en-US/docs/Web/API/Element/wheel_event\n\n      var deltaY = event.deltaY;\n\n      if (this.startOffset === 0 && deltaY < 0) {\n        return;\n      } // get offset\n      // if necessary, can adjust distance value to make scrolling smoother\n\n\n      var distance = -deltaY;\n      this.offset = range(this.startOffset + distance, -(this.count * this.itemHeight), this.itemHeight);\n\n      if (mousewheelTimer) {\n        clearTimeout(mousewheelTimer);\n      }\n\n      mousewheelTimer = setTimeout(function () {\n        _this2.onTouchEnd();\n\n        _this2.touchStartTime = 0;\n      }, MOMENTUM_LIMIT_TIME);\n    },\n    onTransitionEnd: function onTransitionEnd() {\n      this.stopMomentum();\n    },\n    onClickItem: function onClickItem(index) {\n      if (this.moving || this.readonly) {\n        return;\n      }\n\n      this.transitionEndTrigger = null;\n      this.duration = DEFAULT_DURATION;\n      this.setIndex(index, true);\n    },\n    adjustIndex: function adjustIndex(index) {\n      index = range(index, 0, this.count);\n\n      for (var i = index; i < this.count; i++) {\n        if (!isOptionDisabled(this.options[i])) return i;\n      }\n\n      for (var _i = index - 1; _i >= 0; _i--) {\n        if (!isOptionDisabled(this.options[_i])) return _i;\n      }\n    },\n    getOptionText: function getOptionText(option) {\n      if (isObject(option) && this.valueKey in option) {\n        return option[this.valueKey];\n      }\n\n      return option;\n    },\n    setIndex: function setIndex(index, emitChange) {\n      var _this3 = this;\n\n      index = this.adjustIndex(index) || 0;\n      var offset = -index * this.itemHeight;\n\n      var trigger = function trigger() {\n        if (index !== _this3.currentIndex) {\n          _this3.currentIndex = index;\n\n          if (emitChange) {\n            _this3.$emit('change', index);\n          }\n        }\n      }; // trigger the change event after transitionend when moving\n\n\n      if (this.moving && offset !== this.offset) {\n        this.transitionEndTrigger = trigger;\n      } else {\n        trigger();\n      }\n\n      this.offset = offset;\n    },\n    setValue: function setValue(value) {\n      var options = this.options;\n\n      for (var i = 0; i < options.length; i++) {\n        if (this.getOptionText(options[i]) === value) {\n          return this.setIndex(i);\n        }\n      }\n    },\n    getValue: function getValue() {\n      return this.options[this.currentIndex];\n    },\n    getIndexByOffset: function getIndexByOffset(offset) {\n      return range(Math.round(-offset / this.itemHeight), 0, this.count - 1);\n    },\n    momentum: function momentum(distance, duration) {\n      var speed = Math.abs(distance / duration);\n      distance = this.offset + speed / 0.003 * (distance < 0 ? -1 : 1);\n      var index = this.getIndexByOffset(distance);\n      this.duration = +this.swipeDuration;\n      this.setIndex(index, true);\n    },\n    stopMomentum: function stopMomentum() {\n      this.moving = false;\n      this.duration = 0;\n\n      if (this.transitionEndTrigger) {\n        this.transitionEndTrigger();\n        this.transitionEndTrigger = null;\n      }\n    },\n    genOptions: function genOptions() {\n      var _this4 = this;\n\n      var h = this.$createElement;\n      var optionStyle = {\n        height: this.itemHeight + \"px\"\n      };\n      return this.options.map(function (option, index) {\n        var _domProps;\n\n        var text = _this4.getOptionText(option);\n\n        var disabled = isOptionDisabled(option);\n        var data = {\n          style: optionStyle,\n          attrs: {\n            role: 'button',\n            tabindex: disabled ? -1 : 0\n          },\n          class: [bem('item', {\n            disabled: disabled,\n            selected: index === _this4.currentIndex\n          })],\n          on: {\n            click: function click() {\n              _this4.onClickItem(index);\n            }\n          }\n        };\n        var childData = {\n          class: 'van-ellipsis',\n          domProps: (_domProps = {}, _domProps[_this4.allowHtml ? 'innerHTML' : 'textContent'] = text, _domProps)\n        };\n        return h(\"li\", _mergeJSXProps([{}, data]), [_this4.slots('option', option) || h(\"div\", _mergeJSXProps2([{}, childData]))]);\n      });\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var wrapperStyle = {\n      transform: \"translate3d(0, \" + (this.offset + this.baseOffset) + \"px, 0)\",\n      transitionDuration: this.duration + \"ms\",\n      transitionProperty: this.duration ? 'all' : 'none'\n    };\n    return h(\"div\", {\n      \"class\": [bem(), this.className]\n    }, [h(\"ul\", {\n      \"ref\": \"wrapper\",\n      \"style\": wrapperStyle,\n      \"class\": bem('wrapper'),\n      \"on\": {\n        \"transitionend\": this.onTransitionEnd\n      }\n    }, [this.genOptions()])]);\n  }\n});"]},"metadata":{},"sourceType":"module"}