{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { createNamespace, addUnit } from '../../utils';\nimport { setScrollTop } from '../../utils/dom/scroll';\nimport { t, bem, compareDay, getPrevDay, getNextDay, formatMonthTitle } from '../utils';\nimport { getMonthEndDay } from '../../datetime-picker/utils';\n\nvar _createNamespace = createNamespace('calendar-month'),\n    createComponent = _createNamespace[0];\n\nexport default createComponent({\n  props: {\n    date: Date,\n    type: String,\n    color: String,\n    minDate: Date,\n    maxDate: Date,\n    showMark: Boolean,\n    rowHeight: [Number, String],\n    formatter: Function,\n    lazyRender: Boolean,\n    currentDate: [Date, Array],\n    allowSameDay: Boolean,\n    showSubtitle: Boolean,\n    showMonthTitle: Boolean,\n    firstDayOfWeek: Number\n  },\n  data: function data() {\n    return {\n      visible: false\n    };\n  },\n  computed: {\n    title: function title() {\n      return formatMonthTitle(this.date);\n    },\n    rowHeightWithUnit: function rowHeightWithUnit() {\n      return addUnit(this.rowHeight);\n    },\n    offset: function offset() {\n      var firstDayOfWeek = this.firstDayOfWeek;\n      var realDay = this.date.getDay();\n\n      if (!firstDayOfWeek) {\n        return realDay;\n      }\n\n      return (realDay + 7 - this.firstDayOfWeek) % 7;\n    },\n    totalDay: function totalDay() {\n      return getMonthEndDay(this.date.getFullYear(), this.date.getMonth() + 1);\n    },\n    shouldRender: function shouldRender() {\n      return this.visible || !this.lazyRender;\n    },\n    placeholders: function placeholders() {\n      var rows = [];\n      var count = Math.ceil((this.totalDay + this.offset) / 7);\n\n      for (var day = 1; day <= count; day++) {\n        rows.push({\n          type: 'placeholder'\n        });\n      }\n\n      return rows;\n    },\n    days: function days() {\n      var days = [];\n      var year = this.date.getFullYear();\n      var month = this.date.getMonth();\n\n      for (var day = 1; day <= this.totalDay; day++) {\n        var date = new Date(year, month, day);\n        var type = this.getDayType(date);\n        var config = {\n          date: date,\n          type: type,\n          text: day,\n          bottomInfo: this.getBottomInfo(type)\n        };\n\n        if (this.formatter) {\n          config = this.formatter(config);\n        }\n\n        days.push(config);\n      }\n\n      return days;\n    }\n  },\n  methods: {\n    getHeight: function getHeight() {\n      var _this$$el;\n\n      return ((_this$$el = this.$el) == null ? void 0 : _this$$el.getBoundingClientRect().height) || 0;\n    },\n    scrollIntoView: function scrollIntoView(body) {\n      var _this$$refs = this.$refs,\n          days = _this$$refs.days,\n          month = _this$$refs.month;\n      var el = this.showSubtitle ? days : month;\n      var scrollTop = el.getBoundingClientRect().top - body.getBoundingClientRect().top + body.scrollTop;\n      setScrollTop(body, scrollTop);\n    },\n    getMultipleDayType: function getMultipleDayType(day) {\n      var _this = this;\n\n      var isSelected = function isSelected(date) {\n        return _this.currentDate.some(function (item) {\n          return compareDay(item, date) === 0;\n        });\n      };\n\n      if (isSelected(day)) {\n        var prevDay = getPrevDay(day);\n        var nextDay = getNextDay(day);\n        var prevSelected = isSelected(prevDay);\n        var nextSelected = isSelected(nextDay);\n\n        if (prevSelected && nextSelected) {\n          return 'multiple-middle';\n        }\n\n        if (prevSelected) {\n          return 'end';\n        }\n\n        return nextSelected ? 'start' : 'multiple-selected';\n      }\n\n      return '';\n    },\n    getRangeDayType: function getRangeDayType(day) {\n      var _this$currentDate = this.currentDate,\n          startDay = _this$currentDate[0],\n          endDay = _this$currentDate[1];\n\n      if (!startDay) {\n        return '';\n      }\n\n      var compareToStart = compareDay(day, startDay);\n\n      if (!endDay) {\n        return compareToStart === 0 ? 'start' : '';\n      }\n\n      var compareToEnd = compareDay(day, endDay);\n\n      if (compareToStart === 0 && compareToEnd === 0 && this.allowSameDay) {\n        return 'start-end';\n      }\n\n      if (compareToStart === 0) {\n        return 'start';\n      }\n\n      if (compareToEnd === 0) {\n        return 'end';\n      }\n\n      if (compareToStart > 0 && compareToEnd < 0) {\n        return 'middle';\n      }\n    },\n    getDayType: function getDayType(day) {\n      var type = this.type,\n          minDate = this.minDate,\n          maxDate = this.maxDate,\n          currentDate = this.currentDate;\n\n      if (compareDay(day, minDate) < 0 || compareDay(day, maxDate) > 0) {\n        return 'disabled';\n      }\n\n      if (currentDate === null) {\n        return;\n      }\n\n      if (type === 'single') {\n        return compareDay(day, currentDate) === 0 ? 'selected' : '';\n      }\n\n      if (type === 'multiple') {\n        return this.getMultipleDayType(day);\n      }\n      /* istanbul ignore else */\n\n\n      if (type === 'range') {\n        return this.getRangeDayType(day);\n      }\n    },\n    getBottomInfo: function getBottomInfo(type) {\n      if (this.type === 'range') {\n        if (type === 'start' || type === 'end') {\n          return t(type);\n        }\n\n        if (type === 'start-end') {\n          return t('startEnd');\n        }\n      }\n    },\n    getDayStyle: function getDayStyle(type, index) {\n      var style = {\n        height: this.rowHeightWithUnit\n      };\n\n      if (type === 'placeholder') {\n        style.width = '100%';\n        return style;\n      }\n\n      if (index === 0) {\n        style.marginLeft = 100 * this.offset / 7 + \"%\";\n      }\n\n      if (this.color) {\n        if (type === 'start' || type === 'end' || type === 'start-end' || type === 'multiple-selected' || type === 'multiple-middle') {\n          style.background = this.color;\n        } else if (type === 'middle') {\n          style.color = this.color;\n        }\n      }\n\n      return style;\n    },\n    genTitle: function genTitle() {\n      var h = this.$createElement;\n\n      if (this.showMonthTitle) {\n        return h(\"div\", {\n          \"class\": bem('month-title')\n        }, [this.title]);\n      }\n    },\n    genMark: function genMark() {\n      var h = this.$createElement;\n\n      if (this.showMark && this.shouldRender) {\n        return h(\"div\", {\n          \"class\": bem('month-mark')\n        }, [this.date.getMonth() + 1]);\n      }\n    },\n    genDays: function genDays() {\n      var h = this.$createElement;\n      var days = this.shouldRender ? this.days : this.placeholders;\n      return h(\"div\", {\n        \"ref\": \"days\",\n        \"attrs\": {\n          \"role\": \"grid\"\n        },\n        \"class\": bem('days')\n      }, [this.genMark(), days.map(this.genDay)]);\n    },\n    genTopInfo: function genTopInfo(item) {\n      var h = this.$createElement;\n      var slot = this.$scopedSlots['top-info'];\n\n      if (item.topInfo || slot) {\n        return h(\"div\", {\n          \"class\": bem('top-info')\n        }, [slot ? slot(item) : item.topInfo]);\n      }\n    },\n    genBottomInfo: function genBottomInfo(item) {\n      var h = this.$createElement;\n      var slot = this.$scopedSlots['bottom-info'];\n\n      if (item.bottomInfo || slot) {\n        return h(\"div\", {\n          \"class\": bem('bottom-info')\n        }, [slot ? slot(item) : item.bottomInfo]);\n      }\n    },\n    genDay: function genDay(item, index) {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      var type = item.type;\n      var style = this.getDayStyle(type, index);\n      var disabled = type === 'disabled';\n\n      var onClick = function onClick() {\n        if (!disabled) {\n          _this2.$emit('click', item);\n        }\n      };\n\n      if (type === 'selected') {\n        return h(\"div\", {\n          \"attrs\": {\n            \"role\": \"gridcell\",\n            \"tabindex\": -1\n          },\n          \"style\": style,\n          \"class\": [bem('day'), item.className],\n          \"on\": {\n            \"click\": onClick\n          }\n        }, [h(\"div\", {\n          \"class\": bem('selected-day'),\n          \"style\": {\n            width: this.rowHeightWithUnit,\n            height: this.rowHeightWithUnit,\n            background: this.color\n          }\n        }, [this.genTopInfo(item), item.text, this.genBottomInfo(item)])]);\n      }\n\n      return h(\"div\", {\n        \"attrs\": {\n          \"role\": \"gridcell\",\n          \"tabindex\": disabled ? null : -1\n        },\n        \"style\": style,\n        \"class\": [bem('day', type), item.className],\n        \"on\": {\n          \"click\": onClick\n        }\n      }, [this.genTopInfo(item), item.text, this.genBottomInfo(item)]);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem('month'),\n      \"ref\": \"month\"\n    }, [this.genTitle(), this.genDays()]);\n  }\n});","map":{"version":3,"sources":["C:/Users/Lisp/Desktop/items/node_modules/vant/es/calendar/components/Month.js"],"names":["createNamespace","addUnit","setScrollTop","t","bem","compareDay","getPrevDay","getNextDay","formatMonthTitle","getMonthEndDay","_createNamespace","createComponent","props","date","Date","type","String","color","minDate","maxDate","showMark","Boolean","rowHeight","Number","formatter","Function","lazyRender","currentDate","Array","allowSameDay","showSubtitle","showMonthTitle","firstDayOfWeek","data","visible","computed","title","rowHeightWithUnit","offset","realDay","getDay","totalDay","getFullYear","getMonth","shouldRender","placeholders","rows","count","Math","ceil","day","push","days","year","month","getDayType","config","text","bottomInfo","getBottomInfo","methods","getHeight","_this$$el","$el","getBoundingClientRect","height","scrollIntoView","body","_this$$refs","$refs","el","scrollTop","top","getMultipleDayType","_this","isSelected","some","item","prevDay","nextDay","prevSelected","nextSelected","getRangeDayType","_this$currentDate","startDay","endDay","compareToStart","compareToEnd","getDayStyle","index","style","width","marginLeft","background","genTitle","h","$createElement","genMark","genDays","map","genDay","genTopInfo","slot","$scopedSlots","topInfo","genBottomInfo","_this2","disabled","onClick","$emit","className","render","arguments"],"mappings":"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","sourcesContent":["import { createNamespace, addUnit } from '../../utils';\nimport { setScrollTop } from '../../utils/dom/scroll';\nimport { t, bem, compareDay, getPrevDay, getNextDay, formatMonthTitle } from '../utils';\nimport { getMonthEndDay } from '../../datetime-picker/utils';\n\nvar _createNamespace = createNamespace('calendar-month'),\n    createComponent = _createNamespace[0];\n\nexport default createComponent({\n  props: {\n    date: Date,\n    type: String,\n    color: String,\n    minDate: Date,\n    maxDate: Date,\n    showMark: Boolean,\n    rowHeight: [Number, String],\n    formatter: Function,\n    lazyRender: Boolean,\n    currentDate: [Date, Array],\n    allowSameDay: Boolean,\n    showSubtitle: Boolean,\n    showMonthTitle: Boolean,\n    firstDayOfWeek: Number\n  },\n  data: function data() {\n    return {\n      visible: false\n    };\n  },\n  computed: {\n    title: function title() {\n      return formatMonthTitle(this.date);\n    },\n    rowHeightWithUnit: function rowHeightWithUnit() {\n      return addUnit(this.rowHeight);\n    },\n    offset: function offset() {\n      var firstDayOfWeek = this.firstDayOfWeek;\n      var realDay = this.date.getDay();\n\n      if (!firstDayOfWeek) {\n        return realDay;\n      }\n\n      return (realDay + 7 - this.firstDayOfWeek) % 7;\n    },\n    totalDay: function totalDay() {\n      return getMonthEndDay(this.date.getFullYear(), this.date.getMonth() + 1);\n    },\n    shouldRender: function shouldRender() {\n      return this.visible || !this.lazyRender;\n    },\n    placeholders: function placeholders() {\n      var rows = [];\n      var count = Math.ceil((this.totalDay + this.offset) / 7);\n\n      for (var day = 1; day <= count; day++) {\n        rows.push({\n          type: 'placeholder'\n        });\n      }\n\n      return rows;\n    },\n    days: function days() {\n      var days = [];\n      var year = this.date.getFullYear();\n      var month = this.date.getMonth();\n\n      for (var day = 1; day <= this.totalDay; day++) {\n        var date = new Date(year, month, day);\n        var type = this.getDayType(date);\n        var config = {\n          date: date,\n          type: type,\n          text: day,\n          bottomInfo: this.getBottomInfo(type)\n        };\n\n        if (this.formatter) {\n          config = this.formatter(config);\n        }\n\n        days.push(config);\n      }\n\n      return days;\n    }\n  },\n  methods: {\n    getHeight: function getHeight() {\n      var _this$$el;\n\n      return ((_this$$el = this.$el) == null ? void 0 : _this$$el.getBoundingClientRect().height) || 0;\n    },\n    scrollIntoView: function scrollIntoView(body) {\n      var _this$$refs = this.$refs,\n          days = _this$$refs.days,\n          month = _this$$refs.month;\n      var el = this.showSubtitle ? days : month;\n      var scrollTop = el.getBoundingClientRect().top - body.getBoundingClientRect().top + body.scrollTop;\n      setScrollTop(body, scrollTop);\n    },\n    getMultipleDayType: function getMultipleDayType(day) {\n      var _this = this;\n\n      var isSelected = function isSelected(date) {\n        return _this.currentDate.some(function (item) {\n          return compareDay(item, date) === 0;\n        });\n      };\n\n      if (isSelected(day)) {\n        var prevDay = getPrevDay(day);\n        var nextDay = getNextDay(day);\n        var prevSelected = isSelected(prevDay);\n        var nextSelected = isSelected(nextDay);\n\n        if (prevSelected && nextSelected) {\n          return 'multiple-middle';\n        }\n\n        if (prevSelected) {\n          return 'end';\n        }\n\n        return nextSelected ? 'start' : 'multiple-selected';\n      }\n\n      return '';\n    },\n    getRangeDayType: function getRangeDayType(day) {\n      var _this$currentDate = this.currentDate,\n          startDay = _this$currentDate[0],\n          endDay = _this$currentDate[1];\n\n      if (!startDay) {\n        return '';\n      }\n\n      var compareToStart = compareDay(day, startDay);\n\n      if (!endDay) {\n        return compareToStart === 0 ? 'start' : '';\n      }\n\n      var compareToEnd = compareDay(day, endDay);\n\n      if (compareToStart === 0 && compareToEnd === 0 && this.allowSameDay) {\n        return 'start-end';\n      }\n\n      if (compareToStart === 0) {\n        return 'start';\n      }\n\n      if (compareToEnd === 0) {\n        return 'end';\n      }\n\n      if (compareToStart > 0 && compareToEnd < 0) {\n        return 'middle';\n      }\n    },\n    getDayType: function getDayType(day) {\n      var type = this.type,\n          minDate = this.minDate,\n          maxDate = this.maxDate,\n          currentDate = this.currentDate;\n\n      if (compareDay(day, minDate) < 0 || compareDay(day, maxDate) > 0) {\n        return 'disabled';\n      }\n\n      if (currentDate === null) {\n        return;\n      }\n\n      if (type === 'single') {\n        return compareDay(day, currentDate) === 0 ? 'selected' : '';\n      }\n\n      if (type === 'multiple') {\n        return this.getMultipleDayType(day);\n      }\n      /* istanbul ignore else */\n\n\n      if (type === 'range') {\n        return this.getRangeDayType(day);\n      }\n    },\n    getBottomInfo: function getBottomInfo(type) {\n      if (this.type === 'range') {\n        if (type === 'start' || type === 'end') {\n          return t(type);\n        }\n\n        if (type === 'start-end') {\n          return t('startEnd');\n        }\n      }\n    },\n    getDayStyle: function getDayStyle(type, index) {\n      var style = {\n        height: this.rowHeightWithUnit\n      };\n\n      if (type === 'placeholder') {\n        style.width = '100%';\n        return style;\n      }\n\n      if (index === 0) {\n        style.marginLeft = 100 * this.offset / 7 + \"%\";\n      }\n\n      if (this.color) {\n        if (type === 'start' || type === 'end' || type === 'start-end' || type === 'multiple-selected' || type === 'multiple-middle') {\n          style.background = this.color;\n        } else if (type === 'middle') {\n          style.color = this.color;\n        }\n      }\n\n      return style;\n    },\n    genTitle: function genTitle() {\n      var h = this.$createElement;\n\n      if (this.showMonthTitle) {\n        return h(\"div\", {\n          \"class\": bem('month-title')\n        }, [this.title]);\n      }\n    },\n    genMark: function genMark() {\n      var h = this.$createElement;\n\n      if (this.showMark && this.shouldRender) {\n        return h(\"div\", {\n          \"class\": bem('month-mark')\n        }, [this.date.getMonth() + 1]);\n      }\n    },\n    genDays: function genDays() {\n      var h = this.$createElement;\n      var days = this.shouldRender ? this.days : this.placeholders;\n      return h(\"div\", {\n        \"ref\": \"days\",\n        \"attrs\": {\n          \"role\": \"grid\"\n        },\n        \"class\": bem('days')\n      }, [this.genMark(), days.map(this.genDay)]);\n    },\n    genTopInfo: function genTopInfo(item) {\n      var h = this.$createElement;\n      var slot = this.$scopedSlots['top-info'];\n\n      if (item.topInfo || slot) {\n        return h(\"div\", {\n          \"class\": bem('top-info')\n        }, [slot ? slot(item) : item.topInfo]);\n      }\n    },\n    genBottomInfo: function genBottomInfo(item) {\n      var h = this.$createElement;\n      var slot = this.$scopedSlots['bottom-info'];\n\n      if (item.bottomInfo || slot) {\n        return h(\"div\", {\n          \"class\": bem('bottom-info')\n        }, [slot ? slot(item) : item.bottomInfo]);\n      }\n    },\n    genDay: function genDay(item, index) {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      var type = item.type;\n      var style = this.getDayStyle(type, index);\n      var disabled = type === 'disabled';\n\n      var onClick = function onClick() {\n        if (!disabled) {\n          _this2.$emit('click', item);\n        }\n      };\n\n      if (type === 'selected') {\n        return h(\"div\", {\n          \"attrs\": {\n            \"role\": \"gridcell\",\n            \"tabindex\": -1\n          },\n          \"style\": style,\n          \"class\": [bem('day'), item.className],\n          \"on\": {\n            \"click\": onClick\n          }\n        }, [h(\"div\", {\n          \"class\": bem('selected-day'),\n          \"style\": {\n            width: this.rowHeightWithUnit,\n            height: this.rowHeightWithUnit,\n            background: this.color\n          }\n        }, [this.genTopInfo(item), item.text, this.genBottomInfo(item)])]);\n      }\n\n      return h(\"div\", {\n        \"attrs\": {\n          \"role\": \"gridcell\",\n          \"tabindex\": disabled ? null : -1\n        },\n        \"style\": style,\n        \"class\": [bem('day', type), item.className],\n        \"on\": {\n          \"click\": onClick\n        }\n      }, [this.genTopInfo(item), item.text, this.genBottomInfo(item)]);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem('month'),\n      \"ref\": \"month\"\n    }, [this.genTitle(), this.genDays()]);\n  }\n});"]},"metadata":{},"sourceType":"module"}