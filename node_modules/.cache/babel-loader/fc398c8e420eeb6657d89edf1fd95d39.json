{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport { createNamespace } from '../utils';\nimport Tab from '../tab';\nimport Tabs from '../tabs';\nimport Icon from '../icon';\n\nvar _createNamespace = createNamespace('cascader'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nexport default createComponent({\n  props: {\n    title: String,\n    value: [Number, String],\n    fieldNames: Object,\n    placeholder: String,\n    activeColor: String,\n    options: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    closeable: {\n      type: Boolean,\n      default: true\n    },\n    showHeader: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      tabs: [],\n      activeTab: 0\n    };\n  },\n  computed: {\n    textKey: function textKey() {\n      var _this$fieldNames;\n\n      return ((_this$fieldNames = this.fieldNames) == null ? void 0 : _this$fieldNames.text) || 'text';\n    },\n    valueKey: function valueKey() {\n      var _this$fieldNames2;\n\n      return ((_this$fieldNames2 = this.fieldNames) == null ? void 0 : _this$fieldNames2.value) || 'value';\n    },\n    childrenKey: function childrenKey() {\n      var _this$fieldNames3;\n\n      return ((_this$fieldNames3 = this.fieldNames) == null ? void 0 : _this$fieldNames3.children) || 'children';\n    }\n  },\n  watch: {\n    options: {\n      deep: true,\n      handler: 'updateTabs'\n    },\n    value: function value(_value) {\n      var _this = this;\n\n      if (_value || _value === 0) {\n        var values = this.tabs.map(function (tab) {\n          var _tab$selectedOption;\n\n          return (_tab$selectedOption = tab.selectedOption) == null ? void 0 : _tab$selectedOption[_this.valueKey];\n        });\n\n        if (values.indexOf(_value) !== -1) {\n          return;\n        }\n      }\n\n      this.updateTabs();\n    }\n  },\n  created: function created() {\n    this.updateTabs();\n  },\n  methods: {\n    getSelectedOptionsByValue: function getSelectedOptionsByValue(options, value) {\n      for (var i = 0; i < options.length; i++) {\n        var option = options[i];\n\n        if (option[this.valueKey] === value) {\n          return [option];\n        }\n\n        if (option[this.childrenKey]) {\n          var selectedOptions = this.getSelectedOptionsByValue(option[this.childrenKey], value);\n\n          if (selectedOptions) {\n            return [option].concat(selectedOptions);\n          }\n        }\n      }\n    },\n    updateTabs: function updateTabs() {\n      var _this2 = this;\n\n      if (this.value || this.value === 0) {\n        var selectedOptions = this.getSelectedOptionsByValue(this.options, this.value);\n\n        if (selectedOptions) {\n          var optionsCursor = this.options;\n          this.tabs = selectedOptions.map(function (option) {\n            var tab = {\n              options: optionsCursor,\n              selectedOption: option\n            };\n            var next = optionsCursor.filter(function (item) {\n              return item[_this2.valueKey] === option[_this2.valueKey];\n            });\n\n            if (next.length) {\n              optionsCursor = next[0][_this2.childrenKey];\n            }\n\n            return tab;\n          });\n\n          if (optionsCursor) {\n            this.tabs.push({\n              options: optionsCursor,\n              selectedOption: null\n            });\n          }\n\n          this.$nextTick(function () {\n            _this2.activeTab = _this2.tabs.length - 1;\n          });\n          return;\n        }\n      }\n\n      this.tabs = [{\n        options: this.options,\n        selectedOption: null\n      }];\n    },\n    onSelect: function onSelect(option, tabIndex) {\n      var _this3 = this;\n\n      this.tabs[tabIndex].selectedOption = option;\n\n      if (this.tabs.length > tabIndex + 1) {\n        this.tabs = this.tabs.slice(0, tabIndex + 1);\n      }\n\n      if (option[this.childrenKey]) {\n        var nextTab = {\n          options: option[this.childrenKey],\n          selectedOption: null\n        };\n\n        if (this.tabs[tabIndex + 1]) {\n          this.$set(this.tabs, tabIndex + 1, nextTab);\n        } else {\n          this.tabs.push(nextTab);\n        }\n\n        this.$nextTick(function () {\n          _this3.activeTab++;\n        });\n      }\n\n      var selectedOptions = this.tabs.map(function (tab) {\n        return tab.selectedOption;\n      }).filter(function (item) {\n        return !!item;\n      });\n      var eventParams = {\n        value: option[this.valueKey],\n        tabIndex: tabIndex,\n        selectedOptions: selectedOptions\n      };\n      this.$emit('input', option[this.valueKey]);\n      this.$emit('change', eventParams);\n\n      if (!option[this.childrenKey]) {\n        this.$emit('finish', eventParams);\n      }\n    },\n    onClose: function onClose() {\n      this.$emit('close');\n    },\n    renderHeader: function renderHeader() {\n      var h = this.$createElement;\n\n      if (this.showHeader) {\n        return h(\"div\", {\n          \"class\": bem('header')\n        }, [h(\"h2\", {\n          \"class\": bem('title')\n        }, [this.slots('title') || this.title]), this.closeable ? h(Icon, {\n          \"attrs\": {\n            \"name\": \"cross\"\n          },\n          \"class\": bem('close-icon'),\n          \"on\": {\n            \"click\": this.onClose\n          }\n        }) : null]);\n      }\n    },\n    renderOptions: function renderOptions(options, selectedOption, tabIndex) {\n      var _this4 = this;\n\n      var h = this.$createElement;\n\n      var renderOption = function renderOption(option) {\n        var isSelected = selectedOption && option[_this4.valueKey] === selectedOption[_this4.valueKey];\n        var Text = _this4.slots('option', {\n          option: option,\n          selected: isSelected\n        }) || h(\"span\", [option[_this4.textKey]]);\n        return h(\"li\", {\n          \"class\": bem('option', {\n            selected: isSelected\n          }),\n          \"style\": {\n            color: isSelected ? _this4.activeColor : null\n          },\n          \"on\": {\n            \"click\": function click() {\n              _this4.onSelect(option, tabIndex);\n            }\n          }\n        }, [Text, isSelected ? h(Icon, {\n          \"attrs\": {\n            \"name\": \"success\"\n          },\n          \"class\": bem('selected-icon')\n        }) : null]);\n      };\n\n      return h(\"ul\", {\n        \"class\": bem('options')\n      }, [options.map(renderOption)]);\n    },\n    renderTab: function renderTab(item, tabIndex) {\n      var h = this.$createElement;\n      var options = item.options,\n          selectedOption = item.selectedOption;\n      var title = selectedOption ? selectedOption[this.textKey] : this.placeholder || t('select');\n      return h(Tab, {\n        \"attrs\": {\n          \"title\": title,\n          \"titleClass\": bem('tab', {\n            unselected: !selectedOption\n          })\n        }\n      }, [this.renderOptions(options, selectedOption, tabIndex)]);\n    },\n    renderTabs: function renderTabs() {\n      var _this5 = this;\n\n      var h = this.$createElement;\n      return h(Tabs, {\n        \"attrs\": {\n          \"animated\": true,\n          \"swipeable\": true,\n          \"swipeThreshold\": 0,\n          \"color\": this.activeColor\n        },\n        \"class\": bem('tabs'),\n        \"model\": {\n          value: _this5.activeTab,\n          callback: function callback($$v) {\n            _this5.activeTab = $$v;\n          }\n        }\n      }, [this.tabs.map(this.renderTab)]);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem()\n    }, [this.renderHeader(), this.renderTabs()]);\n  }\n});","map":{"version":3,"sources":["C:/Users/Lisp/Desktop/Vue-app/items/node_modules/vant/es/cascader/index.js"],"names":["createNamespace","Tab","Tabs","Icon","_createNamespace","createComponent","bem","t","props","title","String","value","Number","fieldNames","Object","placeholder","activeColor","options","type","Array","default","_default","closeable","Boolean","showHeader","data","tabs","activeTab","computed","textKey","_this$fieldNames","text","valueKey","_this$fieldNames2","childrenKey","_this$fieldNames3","children","watch","deep","handler","_value","_this","values","map","tab","_tab$selectedOption","selectedOption","indexOf","updateTabs","created","methods","getSelectedOptionsByValue","i","length","option","selectedOptions","concat","_this2","optionsCursor","next","filter","item","push","$nextTick","onSelect","tabIndex","_this3","slice","nextTab","$set","eventParams","$emit","onClose","renderHeader","h","$createElement","slots","renderOptions","_this4","renderOption","isSelected","Text","selected","color","click","renderTab","unselected","renderTabs","_this5","callback","$$v","render","arguments"],"mappings":"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","sourcesContent":["import { createNamespace } from '../utils';\nimport Tab from '../tab';\nimport Tabs from '../tabs';\nimport Icon from '../icon';\n\nvar _createNamespace = createNamespace('cascader'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nexport default createComponent({\n  props: {\n    title: String,\n    value: [Number, String],\n    fieldNames: Object,\n    placeholder: String,\n    activeColor: String,\n    options: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    closeable: {\n      type: Boolean,\n      default: true\n    },\n    showHeader: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      tabs: [],\n      activeTab: 0\n    };\n  },\n  computed: {\n    textKey: function textKey() {\n      var _this$fieldNames;\n\n      return ((_this$fieldNames = this.fieldNames) == null ? void 0 : _this$fieldNames.text) || 'text';\n    },\n    valueKey: function valueKey() {\n      var _this$fieldNames2;\n\n      return ((_this$fieldNames2 = this.fieldNames) == null ? void 0 : _this$fieldNames2.value) || 'value';\n    },\n    childrenKey: function childrenKey() {\n      var _this$fieldNames3;\n\n      return ((_this$fieldNames3 = this.fieldNames) == null ? void 0 : _this$fieldNames3.children) || 'children';\n    }\n  },\n  watch: {\n    options: {\n      deep: true,\n      handler: 'updateTabs'\n    },\n    value: function value(_value) {\n      var _this = this;\n\n      if (_value || _value === 0) {\n        var values = this.tabs.map(function (tab) {\n          var _tab$selectedOption;\n\n          return (_tab$selectedOption = tab.selectedOption) == null ? void 0 : _tab$selectedOption[_this.valueKey];\n        });\n\n        if (values.indexOf(_value) !== -1) {\n          return;\n        }\n      }\n\n      this.updateTabs();\n    }\n  },\n  created: function created() {\n    this.updateTabs();\n  },\n  methods: {\n    getSelectedOptionsByValue: function getSelectedOptionsByValue(options, value) {\n      for (var i = 0; i < options.length; i++) {\n        var option = options[i];\n\n        if (option[this.valueKey] === value) {\n          return [option];\n        }\n\n        if (option[this.childrenKey]) {\n          var selectedOptions = this.getSelectedOptionsByValue(option[this.childrenKey], value);\n\n          if (selectedOptions) {\n            return [option].concat(selectedOptions);\n          }\n        }\n      }\n    },\n    updateTabs: function updateTabs() {\n      var _this2 = this;\n\n      if (this.value || this.value === 0) {\n        var selectedOptions = this.getSelectedOptionsByValue(this.options, this.value);\n\n        if (selectedOptions) {\n          var optionsCursor = this.options;\n          this.tabs = selectedOptions.map(function (option) {\n            var tab = {\n              options: optionsCursor,\n              selectedOption: option\n            };\n            var next = optionsCursor.filter(function (item) {\n              return item[_this2.valueKey] === option[_this2.valueKey];\n            });\n\n            if (next.length) {\n              optionsCursor = next[0][_this2.childrenKey];\n            }\n\n            return tab;\n          });\n\n          if (optionsCursor) {\n            this.tabs.push({\n              options: optionsCursor,\n              selectedOption: null\n            });\n          }\n\n          this.$nextTick(function () {\n            _this2.activeTab = _this2.tabs.length - 1;\n          });\n          return;\n        }\n      }\n\n      this.tabs = [{\n        options: this.options,\n        selectedOption: null\n      }];\n    },\n    onSelect: function onSelect(option, tabIndex) {\n      var _this3 = this;\n\n      this.tabs[tabIndex].selectedOption = option;\n\n      if (this.tabs.length > tabIndex + 1) {\n        this.tabs = this.tabs.slice(0, tabIndex + 1);\n      }\n\n      if (option[this.childrenKey]) {\n        var nextTab = {\n          options: option[this.childrenKey],\n          selectedOption: null\n        };\n\n        if (this.tabs[tabIndex + 1]) {\n          this.$set(this.tabs, tabIndex + 1, nextTab);\n        } else {\n          this.tabs.push(nextTab);\n        }\n\n        this.$nextTick(function () {\n          _this3.activeTab++;\n        });\n      }\n\n      var selectedOptions = this.tabs.map(function (tab) {\n        return tab.selectedOption;\n      }).filter(function (item) {\n        return !!item;\n      });\n      var eventParams = {\n        value: option[this.valueKey],\n        tabIndex: tabIndex,\n        selectedOptions: selectedOptions\n      };\n      this.$emit('input', option[this.valueKey]);\n      this.$emit('change', eventParams);\n\n      if (!option[this.childrenKey]) {\n        this.$emit('finish', eventParams);\n      }\n    },\n    onClose: function onClose() {\n      this.$emit('close');\n    },\n    renderHeader: function renderHeader() {\n      var h = this.$createElement;\n\n      if (this.showHeader) {\n        return h(\"div\", {\n          \"class\": bem('header')\n        }, [h(\"h2\", {\n          \"class\": bem('title')\n        }, [this.slots('title') || this.title]), this.closeable ? h(Icon, {\n          \"attrs\": {\n            \"name\": \"cross\"\n          },\n          \"class\": bem('close-icon'),\n          \"on\": {\n            \"click\": this.onClose\n          }\n        }) : null]);\n      }\n    },\n    renderOptions: function renderOptions(options, selectedOption, tabIndex) {\n      var _this4 = this;\n\n      var h = this.$createElement;\n\n      var renderOption = function renderOption(option) {\n        var isSelected = selectedOption && option[_this4.valueKey] === selectedOption[_this4.valueKey];\n        var Text = _this4.slots('option', {\n          option: option,\n          selected: isSelected\n        }) || h(\"span\", [option[_this4.textKey]]);\n        return h(\"li\", {\n          \"class\": bem('option', {\n            selected: isSelected\n          }),\n          \"style\": {\n            color: isSelected ? _this4.activeColor : null\n          },\n          \"on\": {\n            \"click\": function click() {\n              _this4.onSelect(option, tabIndex);\n            }\n          }\n        }, [Text, isSelected ? h(Icon, {\n          \"attrs\": {\n            \"name\": \"success\"\n          },\n          \"class\": bem('selected-icon')\n        }) : null]);\n      };\n\n      return h(\"ul\", {\n        \"class\": bem('options')\n      }, [options.map(renderOption)]);\n    },\n    renderTab: function renderTab(item, tabIndex) {\n      var h = this.$createElement;\n      var options = item.options,\n          selectedOption = item.selectedOption;\n      var title = selectedOption ? selectedOption[this.textKey] : this.placeholder || t('select');\n      return h(Tab, {\n        \"attrs\": {\n          \"title\": title,\n          \"titleClass\": bem('tab', {\n            unselected: !selectedOption\n          })\n        }\n      }, [this.renderOptions(options, selectedOption, tabIndex)]);\n    },\n    renderTabs: function renderTabs() {\n      var _this5 = this;\n\n      var h = this.$createElement;\n      return h(Tabs, {\n        \"attrs\": {\n          \"animated\": true,\n          \"swipeable\": true,\n          \"swipeThreshold\": 0,\n          \"color\": this.activeColor\n        },\n        \"class\": bem('tabs'),\n        \"model\": {\n          value: _this5.activeTab,\n          callback: function callback($$v) {\n            _this5.activeTab = $$v;\n          }\n        }\n      }, [this.tabs.map(this.renderTab)]);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem()\n    }, [this.renderHeader(), this.renderTabs()]);\n  }\n});"]},"metadata":{},"sourceType":"module"}