{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport _mergeJSXProps2 from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport { createNamespace, isDef, addUnit } from '../utils';\nimport { resetScroll } from '../utils/dom/reset-scroll';\nimport { preventDefault } from '../utils/dom/event';\nimport { addNumber, formatNumber as _formatNumber } from '../utils/format/number';\nimport { isNaN } from '../utils/validate/number';\nimport { FieldMixin } from '../mixins/field';\n\nvar _createNamespace = createNamespace('stepper'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nvar LONG_PRESS_START_TIME = 600;\nvar LONG_PRESS_INTERVAL = 200;\n\nfunction equal(value1, value2) {\n  return String(value1) === String(value2);\n}\n\nexport default createComponent({\n  mixins: [FieldMixin],\n  props: {\n    value: null,\n    theme: String,\n    integer: Boolean,\n    disabled: Boolean,\n    allowEmpty: Boolean,\n    inputWidth: [Number, String],\n    buttonSize: [Number, String],\n    asyncChange: Boolean,\n    placeholder: String,\n    disablePlus: Boolean,\n    disableMinus: Boolean,\n    disableInput: Boolean,\n    decimalLength: [Number, String],\n    name: {\n      type: [Number, String],\n      default: ''\n    },\n    min: {\n      type: [Number, String],\n      default: 1\n    },\n    max: {\n      type: [Number, String],\n      default: Infinity\n    },\n    step: {\n      type: [Number, String],\n      default: 1\n    },\n    defaultValue: {\n      type: [Number, String],\n      default: 1\n    },\n    showPlus: {\n      type: Boolean,\n      default: true\n    },\n    showMinus: {\n      type: Boolean,\n      default: true\n    },\n    showInput: {\n      type: Boolean,\n      default: true\n    },\n    longPress: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    var _this$value;\n\n    var defaultValue = (_this$value = this.value) != null ? _this$value : this.defaultValue;\n    var value = this.format(defaultValue);\n\n    if (!equal(value, this.value)) {\n      this.$emit('input', value);\n    }\n\n    return {\n      currentValue: value\n    };\n  },\n  computed: {\n    minusDisabled: function minusDisabled() {\n      return this.disabled || this.disableMinus || this.currentValue <= +this.min;\n    },\n    plusDisabled: function plusDisabled() {\n      return this.disabled || this.disablePlus || this.currentValue >= +this.max;\n    },\n    inputStyle: function inputStyle() {\n      var style = {};\n\n      if (this.inputWidth) {\n        style.width = addUnit(this.inputWidth);\n      }\n\n      if (this.buttonSize) {\n        style.height = addUnit(this.buttonSize);\n      }\n\n      return style;\n    },\n    buttonStyle: function buttonStyle() {\n      if (this.buttonSize) {\n        var size = addUnit(this.buttonSize);\n        return {\n          width: size,\n          height: size\n        };\n      }\n    }\n  },\n  watch: {\n    max: 'check',\n    min: 'check',\n    integer: 'check',\n    decimalLength: 'check',\n    value: function value(val) {\n      if (!equal(val, this.currentValue)) {\n        this.currentValue = this.format(val);\n      }\n    },\n    currentValue: function currentValue(val) {\n      this.$emit('input', val);\n      this.$emit('change', val, {\n        name: this.name\n      });\n    }\n  },\n  methods: {\n    check: function check() {\n      var val = this.format(this.currentValue);\n\n      if (!equal(val, this.currentValue)) {\n        this.currentValue = val;\n      }\n    },\n    // formatNumber illegal characters\n    formatNumber: function formatNumber(value) {\n      return _formatNumber(String(value), !this.integer);\n    },\n    format: function format(value) {\n      if (this.allowEmpty && value === '') {\n        return value;\n      }\n\n      value = this.formatNumber(value); // format range\n\n      value = value === '' ? 0 : +value;\n      value = isNaN(value) ? this.min : value;\n      value = Math.max(Math.min(this.max, value), this.min); // format decimal\n\n      if (isDef(this.decimalLength)) {\n        value = value.toFixed(this.decimalLength);\n      }\n\n      return value;\n    },\n    onInput: function onInput(event) {\n      var value = event.target.value;\n      var formatted = this.formatNumber(value); // limit max decimal length\n\n      if (isDef(this.decimalLength) && formatted.indexOf('.') !== -1) {\n        var pair = formatted.split('.');\n        formatted = pair[0] + \".\" + pair[1].slice(0, this.decimalLength);\n      }\n\n      if (!equal(value, formatted)) {\n        event.target.value = formatted;\n      } // prefer number type\n\n\n      if (formatted === String(+formatted)) {\n        formatted = +formatted;\n      }\n\n      this.emitChange(formatted);\n    },\n    emitChange: function emitChange(value) {\n      if (this.asyncChange) {\n        this.$emit('input', value);\n        this.$emit('change', value, {\n          name: this.name\n        });\n      } else {\n        this.currentValue = value;\n      }\n    },\n    onChange: function onChange() {\n      var type = this.type;\n\n      if (this[type + \"Disabled\"]) {\n        this.$emit('overlimit', type);\n        return;\n      }\n\n      var diff = type === 'minus' ? -this.step : +this.step;\n      var value = this.format(addNumber(+this.currentValue, diff));\n      this.emitChange(value);\n      this.$emit(type);\n    },\n    onFocus: function onFocus(event) {\n      // readonly not work in legacy mobile safari\n      if (this.disableInput && this.$refs.input) {\n        this.$refs.input.blur();\n      } else {\n        this.$emit('focus', event);\n      }\n    },\n    onBlur: function onBlur(event) {\n      var value = this.format(event.target.value);\n      event.target.value = value;\n      this.emitChange(value);\n      this.$emit('blur', event);\n      resetScroll();\n    },\n    longPressStep: function longPressStep() {\n      var _this = this;\n\n      this.longPressTimer = setTimeout(function () {\n        _this.onChange();\n\n        _this.longPressStep(_this.type);\n      }, LONG_PRESS_INTERVAL);\n    },\n    onTouchStart: function onTouchStart() {\n      var _this2 = this;\n\n      if (!this.longPress) {\n        return;\n      }\n\n      clearTimeout(this.longPressTimer);\n      this.isLongPress = false;\n      this.longPressTimer = setTimeout(function () {\n        _this2.isLongPress = true;\n\n        _this2.onChange();\n\n        _this2.longPressStep();\n      }, LONG_PRESS_START_TIME);\n    },\n    onTouchEnd: function onTouchEnd(event) {\n      if (!this.longPress) {\n        return;\n      }\n\n      clearTimeout(this.longPressTimer);\n\n      if (this.isLongPress) {\n        preventDefault(event);\n      }\n    },\n    onMousedown: function onMousedown(event) {\n      // fix mobile safari page scroll down issue\n      // see: https://github.com/youzan/vant/issues/7690\n      if (this.disableInput) {\n        event.preventDefault();\n      }\n    }\n  },\n  render: function render() {\n    var _this3 = this;\n\n    var h = arguments[0];\n\n    var createListeners = function createListeners(type) {\n      return {\n        on: {\n          click: function click(e) {\n            // disable double tap scrolling on mobile safari\n            e.preventDefault();\n            _this3.type = type;\n\n            _this3.onChange();\n          },\n          touchstart: function touchstart() {\n            _this3.type = type;\n\n            _this3.onTouchStart();\n          },\n          touchend: _this3.onTouchEnd,\n          touchcancel: _this3.onTouchEnd\n        }\n      };\n    };\n\n    return h(\"div\", {\n      \"class\": bem([this.theme])\n    }, [h(\"button\", _mergeJSXProps([{\n      \"directives\": [{\n        name: \"show\",\n        value: this.showMinus\n      }],\n      \"attrs\": {\n        \"type\": \"button\"\n      },\n      \"style\": this.buttonStyle,\n      \"class\": bem('minus', {\n        disabled: this.minusDisabled\n      })\n    }, createListeners('minus')])), h(\"input\", {\n      \"directives\": [{\n        name: \"show\",\n        value: this.showInput\n      }],\n      \"ref\": \"input\",\n      \"attrs\": {\n        \"type\": this.integer ? 'tel' : 'text',\n        \"role\": \"spinbutton\",\n        \"disabled\": this.disabled,\n        \"readonly\": this.disableInput,\n        \"inputmode\": this.integer ? 'numeric' : 'decimal',\n        \"placeholder\": this.placeholder,\n        \"aria-valuemax\": this.max,\n        \"aria-valuemin\": this.min,\n        \"aria-valuenow\": this.currentValue\n      },\n      \"class\": bem('input'),\n      \"domProps\": {\n        \"value\": this.currentValue\n      },\n      \"style\": this.inputStyle,\n      \"on\": {\n        \"input\": this.onInput,\n        \"focus\": this.onFocus,\n        \"blur\": this.onBlur,\n        \"mousedown\": this.onMousedown\n      }\n    }), h(\"button\", _mergeJSXProps2([{\n      \"directives\": [{\n        name: \"show\",\n        value: this.showPlus\n      }],\n      \"attrs\": {\n        \"type\": \"button\"\n      },\n      \"style\": this.buttonStyle,\n      \"class\": bem('plus', {\n        disabled: this.plusDisabled\n      })\n    }, createListeners('plus')]))]);\n  }\n});","map":{"version":3,"sources":["C:/Users/Lisp/Desktop/Vue-app/items/node_modules/vant/es/stepper/index.js"],"names":["_mergeJSXProps2","_mergeJSXProps","createNamespace","isDef","addUnit","resetScroll","preventDefault","addNumber","formatNumber","_formatNumber","isNaN","FieldMixin","_createNamespace","createComponent","bem","LONG_PRESS_START_TIME","LONG_PRESS_INTERVAL","equal","value1","value2","String","mixins","props","value","theme","integer","Boolean","disabled","allowEmpty","inputWidth","Number","buttonSize","asyncChange","placeholder","disablePlus","disableMinus","disableInput","decimalLength","name","type","default","min","max","Infinity","step","defaultValue","showPlus","showMinus","showInput","longPress","data","_this$value","format","$emit","currentValue","computed","minusDisabled","plusDisabled","inputStyle","style","width","height","buttonStyle","size","watch","val","methods","check","Math","toFixed","onInput","event","target","formatted","indexOf","pair","split","slice","emitChange","onChange","diff","onFocus","$refs","input","blur","onBlur","longPressStep","_this","longPressTimer","setTimeout","onTouchStart","_this2","clearTimeout","isLongPress","onTouchEnd","onMousedown","render","_this3","h","arguments","createListeners","on","click","e","touchstart","touchend","touchcancel"],"mappings":"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","sourcesContent":["import _mergeJSXProps2 from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport { createNamespace, isDef, addUnit } from '../utils';\nimport { resetScroll } from '../utils/dom/reset-scroll';\nimport { preventDefault } from '../utils/dom/event';\nimport { addNumber, formatNumber as _formatNumber } from '../utils/format/number';\nimport { isNaN } from '../utils/validate/number';\nimport { FieldMixin } from '../mixins/field';\n\nvar _createNamespace = createNamespace('stepper'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nvar LONG_PRESS_START_TIME = 600;\nvar LONG_PRESS_INTERVAL = 200;\n\nfunction equal(value1, value2) {\n  return String(value1) === String(value2);\n}\n\nexport default createComponent({\n  mixins: [FieldMixin],\n  props: {\n    value: null,\n    theme: String,\n    integer: Boolean,\n    disabled: Boolean,\n    allowEmpty: Boolean,\n    inputWidth: [Number, String],\n    buttonSize: [Number, String],\n    asyncChange: Boolean,\n    placeholder: String,\n    disablePlus: Boolean,\n    disableMinus: Boolean,\n    disableInput: Boolean,\n    decimalLength: [Number, String],\n    name: {\n      type: [Number, String],\n      default: ''\n    },\n    min: {\n      type: [Number, String],\n      default: 1\n    },\n    max: {\n      type: [Number, String],\n      default: Infinity\n    },\n    step: {\n      type: [Number, String],\n      default: 1\n    },\n    defaultValue: {\n      type: [Number, String],\n      default: 1\n    },\n    showPlus: {\n      type: Boolean,\n      default: true\n    },\n    showMinus: {\n      type: Boolean,\n      default: true\n    },\n    showInput: {\n      type: Boolean,\n      default: true\n    },\n    longPress: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    var _this$value;\n\n    var defaultValue = (_this$value = this.value) != null ? _this$value : this.defaultValue;\n    var value = this.format(defaultValue);\n\n    if (!equal(value, this.value)) {\n      this.$emit('input', value);\n    }\n\n    return {\n      currentValue: value\n    };\n  },\n  computed: {\n    minusDisabled: function minusDisabled() {\n      return this.disabled || this.disableMinus || this.currentValue <= +this.min;\n    },\n    plusDisabled: function plusDisabled() {\n      return this.disabled || this.disablePlus || this.currentValue >= +this.max;\n    },\n    inputStyle: function inputStyle() {\n      var style = {};\n\n      if (this.inputWidth) {\n        style.width = addUnit(this.inputWidth);\n      }\n\n      if (this.buttonSize) {\n        style.height = addUnit(this.buttonSize);\n      }\n\n      return style;\n    },\n    buttonStyle: function buttonStyle() {\n      if (this.buttonSize) {\n        var size = addUnit(this.buttonSize);\n        return {\n          width: size,\n          height: size\n        };\n      }\n    }\n  },\n  watch: {\n    max: 'check',\n    min: 'check',\n    integer: 'check',\n    decimalLength: 'check',\n    value: function value(val) {\n      if (!equal(val, this.currentValue)) {\n        this.currentValue = this.format(val);\n      }\n    },\n    currentValue: function currentValue(val) {\n      this.$emit('input', val);\n      this.$emit('change', val, {\n        name: this.name\n      });\n    }\n  },\n  methods: {\n    check: function check() {\n      var val = this.format(this.currentValue);\n\n      if (!equal(val, this.currentValue)) {\n        this.currentValue = val;\n      }\n    },\n    // formatNumber illegal characters\n    formatNumber: function formatNumber(value) {\n      return _formatNumber(String(value), !this.integer);\n    },\n    format: function format(value) {\n      if (this.allowEmpty && value === '') {\n        return value;\n      }\n\n      value = this.formatNumber(value); // format range\n\n      value = value === '' ? 0 : +value;\n      value = isNaN(value) ? this.min : value;\n      value = Math.max(Math.min(this.max, value), this.min); // format decimal\n\n      if (isDef(this.decimalLength)) {\n        value = value.toFixed(this.decimalLength);\n      }\n\n      return value;\n    },\n    onInput: function onInput(event) {\n      var value = event.target.value;\n      var formatted = this.formatNumber(value); // limit max decimal length\n\n      if (isDef(this.decimalLength) && formatted.indexOf('.') !== -1) {\n        var pair = formatted.split('.');\n        formatted = pair[0] + \".\" + pair[1].slice(0, this.decimalLength);\n      }\n\n      if (!equal(value, formatted)) {\n        event.target.value = formatted;\n      } // prefer number type\n\n\n      if (formatted === String(+formatted)) {\n        formatted = +formatted;\n      }\n\n      this.emitChange(formatted);\n    },\n    emitChange: function emitChange(value) {\n      if (this.asyncChange) {\n        this.$emit('input', value);\n        this.$emit('change', value, {\n          name: this.name\n        });\n      } else {\n        this.currentValue = value;\n      }\n    },\n    onChange: function onChange() {\n      var type = this.type;\n\n      if (this[type + \"Disabled\"]) {\n        this.$emit('overlimit', type);\n        return;\n      }\n\n      var diff = type === 'minus' ? -this.step : +this.step;\n      var value = this.format(addNumber(+this.currentValue, diff));\n      this.emitChange(value);\n      this.$emit(type);\n    },\n    onFocus: function onFocus(event) {\n      // readonly not work in legacy mobile safari\n      if (this.disableInput && this.$refs.input) {\n        this.$refs.input.blur();\n      } else {\n        this.$emit('focus', event);\n      }\n    },\n    onBlur: function onBlur(event) {\n      var value = this.format(event.target.value);\n      event.target.value = value;\n      this.emitChange(value);\n      this.$emit('blur', event);\n      resetScroll();\n    },\n    longPressStep: function longPressStep() {\n      var _this = this;\n\n      this.longPressTimer = setTimeout(function () {\n        _this.onChange();\n\n        _this.longPressStep(_this.type);\n      }, LONG_PRESS_INTERVAL);\n    },\n    onTouchStart: function onTouchStart() {\n      var _this2 = this;\n\n      if (!this.longPress) {\n        return;\n      }\n\n      clearTimeout(this.longPressTimer);\n      this.isLongPress = false;\n      this.longPressTimer = setTimeout(function () {\n        _this2.isLongPress = true;\n\n        _this2.onChange();\n\n        _this2.longPressStep();\n      }, LONG_PRESS_START_TIME);\n    },\n    onTouchEnd: function onTouchEnd(event) {\n      if (!this.longPress) {\n        return;\n      }\n\n      clearTimeout(this.longPressTimer);\n\n      if (this.isLongPress) {\n        preventDefault(event);\n      }\n    },\n    onMousedown: function onMousedown(event) {\n      // fix mobile safari page scroll down issue\n      // see: https://github.com/youzan/vant/issues/7690\n      if (this.disableInput) {\n        event.preventDefault();\n      }\n    }\n  },\n  render: function render() {\n    var _this3 = this;\n\n    var h = arguments[0];\n\n    var createListeners = function createListeners(type) {\n      return {\n        on: {\n          click: function click(e) {\n            // disable double tap scrolling on mobile safari\n            e.preventDefault();\n            _this3.type = type;\n\n            _this3.onChange();\n          },\n          touchstart: function touchstart() {\n            _this3.type = type;\n\n            _this3.onTouchStart();\n          },\n          touchend: _this3.onTouchEnd,\n          touchcancel: _this3.onTouchEnd\n        }\n      };\n    };\n\n    return h(\"div\", {\n      \"class\": bem([this.theme])\n    }, [h(\"button\", _mergeJSXProps([{\n      \"directives\": [{\n        name: \"show\",\n        value: this.showMinus\n      }],\n      \"attrs\": {\n        \"type\": \"button\"\n      },\n      \"style\": this.buttonStyle,\n      \"class\": bem('minus', {\n        disabled: this.minusDisabled\n      })\n    }, createListeners('minus')])), h(\"input\", {\n      \"directives\": [{\n        name: \"show\",\n        value: this.showInput\n      }],\n      \"ref\": \"input\",\n      \"attrs\": {\n        \"type\": this.integer ? 'tel' : 'text',\n        \"role\": \"spinbutton\",\n        \"disabled\": this.disabled,\n        \"readonly\": this.disableInput,\n        \"inputmode\": this.integer ? 'numeric' : 'decimal',\n        \"placeholder\": this.placeholder,\n        \"aria-valuemax\": this.max,\n        \"aria-valuemin\": this.min,\n        \"aria-valuenow\": this.currentValue\n      },\n      \"class\": bem('input'),\n      \"domProps\": {\n        \"value\": this.currentValue\n      },\n      \"style\": this.inputStyle,\n      \"on\": {\n        \"input\": this.onInput,\n        \"focus\": this.onFocus,\n        \"blur\": this.onBlur,\n        \"mousedown\": this.onMousedown\n      }\n    }), h(\"button\", _mergeJSXProps2([{\n      \"directives\": [{\n        name: \"show\",\n        value: this.showPlus\n      }],\n      \"attrs\": {\n        \"type\": \"button\"\n      },\n      \"style\": this.buttonStyle,\n      \"class\": bem('plus', {\n        disabled: this.plusDisabled\n      })\n    }, createListeners('plus')]))]);\n  }\n});"]},"metadata":{},"sourceType":"module"}