{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\"; // Utils\n\nimport { createNamespace, isObject } from '../utils';\nimport { isMobile } from '../utils/validate/mobile'; // Components\n\nimport Area from '../area';\nimport Cell from '../cell';\nimport Field from '../field';\nimport Popup from '../popup';\nimport Toast from '../toast';\nimport Button from '../button';\nimport Dialog from '../dialog';\nimport Detail from './Detail';\nimport Switch from '../switch';\n\nvar _createNamespace = createNamespace('address-edit'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nvar defaultData = {\n  name: '',\n  tel: '',\n  country: '',\n  province: '',\n  city: '',\n  county: '',\n  areaCode: '',\n  postalCode: '',\n  addressDetail: '',\n  isDefault: false\n};\n\nfunction isPostal(value) {\n  return /^\\d{6}$/.test(value);\n}\n\nexport default createComponent({\n  props: {\n    areaList: Object,\n    isSaving: Boolean,\n    isDeleting: Boolean,\n    validator: Function,\n    showDelete: Boolean,\n    showPostal: Boolean,\n    searchResult: Array,\n    telMaxlength: [Number, String],\n    showSetDefault: Boolean,\n    saveButtonText: String,\n    areaPlaceholder: String,\n    deleteButtonText: String,\n    showSearchResult: Boolean,\n    showArea: {\n      type: Boolean,\n      default: true\n    },\n    showDetail: {\n      type: Boolean,\n      default: true\n    },\n    disableArea: Boolean,\n    detailRows: {\n      type: [Number, String],\n      default: 1\n    },\n    detailMaxlength: {\n      type: [Number, String],\n      default: 200\n    },\n    addressInfo: {\n      type: Object,\n      default: function _default() {\n        return _extends({}, defaultData);\n      }\n    },\n    telValidator: {\n      type: Function,\n      default: isMobile\n    },\n    postalValidator: {\n      type: Function,\n      default: isPostal\n    },\n    areaColumnsPlaceholder: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      data: {},\n      showAreaPopup: false,\n      detailFocused: false,\n      errorInfo: {\n        tel: '',\n        name: '',\n        areaCode: '',\n        postalCode: '',\n        addressDetail: ''\n      }\n    };\n  },\n  computed: {\n    areaListLoaded: function areaListLoaded() {\n      return isObject(this.areaList) && Object.keys(this.areaList).length;\n    },\n    areaText: function areaText() {\n      var _this$data = this.data,\n          country = _this$data.country,\n          province = _this$data.province,\n          city = _this$data.city,\n          county = _this$data.county,\n          areaCode = _this$data.areaCode;\n\n      if (areaCode) {\n        var arr = [country, province, city, county];\n\n        if (province && province === city) {\n          arr.splice(1, 1);\n        }\n\n        return arr.filter(function (text) {\n          return text;\n        }).join('/');\n      }\n\n      return '';\n    },\n    // hide bottom field when use search && detail get focused\n    hideBottomFields: function hideBottomFields() {\n      var searchResult = this.searchResult;\n      return searchResult && searchResult.length && this.detailFocused;\n    }\n  },\n  watch: {\n    addressInfo: {\n      handler: function handler(val) {\n        this.data = _extends({}, defaultData, val);\n        this.setAreaCode(val.areaCode);\n      },\n      deep: true,\n      immediate: true\n    },\n    areaList: function areaList() {\n      this.setAreaCode(this.data.areaCode);\n    }\n  },\n  methods: {\n    onFocus: function onFocus(key) {\n      this.errorInfo[key] = '';\n      this.detailFocused = key === 'addressDetail';\n      this.$emit('focus', key);\n    },\n    onChangeDetail: function onChangeDetail(val) {\n      this.data.addressDetail = val;\n      this.$emit('change-detail', val);\n    },\n    onAreaConfirm: function onAreaConfirm(values) {\n      values = values.filter(function (value) {\n        return !!value;\n      });\n\n      if (values.some(function (value) {\n        return !value.code;\n      })) {\n        Toast(t('areaEmpty'));\n        return;\n      }\n\n      this.showAreaPopup = false;\n      this.assignAreaValues();\n      this.$emit('change-area', values);\n    },\n    assignAreaValues: function assignAreaValues() {\n      var area = this.$refs.area;\n\n      if (area) {\n        var detail = area.getArea();\n        detail.areaCode = detail.code;\n        delete detail.code;\n\n        _extends(this.data, detail);\n      }\n    },\n    onSave: function onSave() {\n      var _this = this;\n\n      var items = ['name', 'tel'];\n\n      if (this.showArea) {\n        items.push('areaCode');\n      }\n\n      if (this.showDetail) {\n        items.push('addressDetail');\n      }\n\n      if (this.showPostal) {\n        items.push('postalCode');\n      }\n\n      var isValid = items.every(function (item) {\n        var msg = _this.getErrorMessage(item);\n\n        if (msg) {\n          _this.errorInfo[item] = msg;\n        }\n\n        return !msg;\n      });\n\n      if (isValid && !this.isSaving) {\n        this.$emit('save', this.data);\n      }\n    },\n    getErrorMessage: function getErrorMessage(key) {\n      var value = String(this.data[key] || '').trim();\n\n      if (this.validator) {\n        var message = this.validator(key, value);\n\n        if (message) {\n          return message;\n        }\n      }\n\n      switch (key) {\n        case 'name':\n          return value ? '' : t('nameEmpty');\n\n        case 'tel':\n          return this.telValidator(value) ? '' : t('telInvalid');\n\n        case 'areaCode':\n          return value ? '' : t('areaEmpty');\n\n        case 'addressDetail':\n          return value ? '' : t('addressEmpty');\n\n        case 'postalCode':\n          return value && !this.postalValidator(value) ? t('postalEmpty') : '';\n      }\n    },\n    onDelete: function onDelete() {\n      var _this2 = this;\n\n      Dialog.confirm({\n        title: t('confirmDelete')\n      }).then(function () {\n        _this2.$emit('delete', _this2.data);\n      }).catch(function () {\n        _this2.$emit('cancel-delete', _this2.data);\n      });\n    },\n    // get values of area component\n    getArea: function getArea() {\n      return this.$refs.area ? this.$refs.area.getValues() : [];\n    },\n    // set area code to area component\n    setAreaCode: function setAreaCode(code) {\n      this.data.areaCode = code || '';\n\n      if (code) {\n        this.$nextTick(this.assignAreaValues);\n      }\n    },\n    // @exposed-api\n    setAddressDetail: function setAddressDetail(value) {\n      this.data.addressDetail = value;\n    },\n    onDetailBlur: function onDetailBlur() {\n      var _this3 = this; // await for click search event\n\n\n      setTimeout(function () {\n        _this3.detailFocused = false;\n      });\n    },\n    genSetDefaultCell: function genSetDefaultCell(h) {\n      var _this4 = this;\n\n      if (this.showSetDefault) {\n        var slots = {\n          'right-icon': function rightIcon() {\n            return h(Switch, {\n              \"attrs\": {\n                \"size\": \"24\"\n              },\n              \"on\": {\n                \"change\": function change(event) {\n                  _this4.$emit('change-default', event);\n                }\n              },\n              \"model\": {\n                value: _this4.data.isDefault,\n                callback: function callback($$v) {\n                  _this4.$set(_this4.data, \"isDefault\", $$v);\n                }\n              }\n            });\n          }\n        };\n        return h(Cell, {\n          \"directives\": [{\n            name: \"show\",\n            value: !this.hideBottomFields\n          }],\n          \"attrs\": {\n            \"center\": true,\n            \"title\": t('defaultAddress')\n          },\n          \"class\": bem('default'),\n          \"scopedSlots\": slots\n        });\n      }\n\n      return h();\n    }\n  },\n  render: function render(h) {\n    var _this5 = this;\n\n    var data = this.data,\n        errorInfo = this.errorInfo,\n        disableArea = this.disableArea,\n        hideBottomFields = this.hideBottomFields;\n\n    var onFocus = function onFocus(name) {\n      return function () {\n        return _this5.onFocus(name);\n      };\n    };\n\n    return h(\"div\", {\n      \"class\": bem()\n    }, [h(\"div\", {\n      \"class\": bem('fields')\n    }, [h(Field, {\n      \"attrs\": {\n        \"clearable\": true,\n        \"label\": t('name'),\n        \"placeholder\": t('namePlaceholder'),\n        \"errorMessage\": errorInfo.name\n      },\n      \"on\": {\n        \"focus\": onFocus('name')\n      },\n      \"model\": {\n        value: data.name,\n        callback: function callback($$v) {\n          _this5.$set(data, \"name\", $$v);\n        }\n      }\n    }), h(Field, {\n      \"attrs\": {\n        \"clearable\": true,\n        \"type\": \"tel\",\n        \"label\": t('tel'),\n        \"maxlength\": this.telMaxlength,\n        \"placeholder\": t('telPlaceholder'),\n        \"errorMessage\": errorInfo.tel\n      },\n      \"on\": {\n        \"focus\": onFocus('tel')\n      },\n      \"model\": {\n        value: data.tel,\n        callback: function callback($$v) {\n          _this5.$set(data, \"tel\", $$v);\n        }\n      }\n    }), h(Field, {\n      \"directives\": [{\n        name: \"show\",\n        value: this.showArea\n      }],\n      \"attrs\": {\n        \"readonly\": true,\n        \"clickable\": !disableArea,\n        \"label\": t('area'),\n        \"placeholder\": this.areaPlaceholder || t('areaPlaceholder'),\n        \"errorMessage\": errorInfo.areaCode,\n        \"rightIcon\": !disableArea ? 'arrow' : null,\n        \"value\": this.areaText\n      },\n      \"on\": {\n        \"focus\": onFocus('areaCode'),\n        \"click\": function click() {\n          _this5.$emit('click-area');\n\n          _this5.showAreaPopup = !disableArea;\n        }\n      }\n    }), h(Detail, {\n      \"directives\": [{\n        name: \"show\",\n        value: this.showDetail\n      }],\n      \"attrs\": {\n        \"focused\": this.detailFocused,\n        \"value\": data.addressDetail,\n        \"errorMessage\": errorInfo.addressDetail,\n        \"detailRows\": this.detailRows,\n        \"detailMaxlength\": this.detailMaxlength,\n        \"searchResult\": this.searchResult,\n        \"showSearchResult\": this.showSearchResult\n      },\n      \"on\": {\n        \"focus\": onFocus('addressDetail'),\n        \"blur\": this.onDetailBlur,\n        \"input\": this.onChangeDetail,\n        \"select-search\": function selectSearch(event) {\n          _this5.$emit('select-search', event);\n        }\n      }\n    }), this.showPostal && h(Field, {\n      \"directives\": [{\n        name: \"show\",\n        value: !hideBottomFields\n      }],\n      \"attrs\": {\n        \"type\": \"tel\",\n        \"maxlength\": \"6\",\n        \"label\": t('postal'),\n        \"placeholder\": t('postal'),\n        \"errorMessage\": errorInfo.postalCode\n      },\n      \"on\": {\n        \"focus\": onFocus('postalCode')\n      },\n      \"model\": {\n        value: data.postalCode,\n        callback: function callback($$v) {\n          _this5.$set(data, \"postalCode\", $$v);\n        }\n      }\n    }), this.slots()]), this.genSetDefaultCell(h), h(\"div\", {\n      \"directives\": [{\n        name: \"show\",\n        value: !hideBottomFields\n      }],\n      \"class\": bem('buttons')\n    }, [h(Button, {\n      \"attrs\": {\n        \"block\": true,\n        \"round\": true,\n        \"loading\": this.isSaving,\n        \"type\": \"danger\",\n        \"text\": this.saveButtonText || t('save')\n      },\n      \"on\": {\n        \"click\": this.onSave\n      }\n    }), this.showDelete && h(Button, {\n      \"attrs\": {\n        \"block\": true,\n        \"round\": true,\n        \"loading\": this.isDeleting,\n        \"text\": this.deleteButtonText || t('delete')\n      },\n      \"on\": {\n        \"click\": this.onDelete\n      }\n    })]), h(Popup, {\n      \"attrs\": {\n        \"round\": true,\n        \"position\": \"bottom\",\n        \"lazyRender\": false,\n        \"getContainer\": \"body\"\n      },\n      \"model\": {\n        value: _this5.showAreaPopup,\n        callback: function callback($$v) {\n          _this5.showAreaPopup = $$v;\n        }\n      }\n    }, [h(Area, {\n      \"ref\": \"area\",\n      \"attrs\": {\n        \"value\": data.areaCode,\n        \"loading\": !this.areaListLoaded,\n        \"areaList\": this.areaList,\n        \"columnsPlaceholder\": this.areaColumnsPlaceholder\n      },\n      \"on\": {\n        \"confirm\": this.onAreaConfirm,\n        \"cancel\": function cancel() {\n          _this5.showAreaPopup = false;\n        }\n      }\n    })])]);\n  }\n});","map":{"version":3,"sources":["C:/Users/Lisp/Desktop/items/node_modules/vant/es/address-edit/index.js"],"names":["_extends","createNamespace","isObject","isMobile","Area","Cell","Field","Popup","Toast","Button","Dialog","Detail","Switch","_createNamespace","createComponent","bem","t","defaultData","name","tel","country","province","city","county","areaCode","postalCode","addressDetail","isDefault","isPostal","value","test","props","areaList","Object","isSaving","Boolean","isDeleting","validator","Function","showDelete","showPostal","searchResult","Array","telMaxlength","Number","String","showSetDefault","saveButtonText","areaPlaceholder","deleteButtonText","showSearchResult","showArea","type","default","showDetail","disableArea","detailRows","detailMaxlength","addressInfo","_default","telValidator","postalValidator","areaColumnsPlaceholder","data","showAreaPopup","detailFocused","errorInfo","computed","areaListLoaded","keys","length","areaText","_this$data","arr","splice","filter","text","join","hideBottomFields","watch","handler","val","setAreaCode","deep","immediate","methods","onFocus","key","$emit","onChangeDetail","onAreaConfirm","values","some","code","assignAreaValues","area","$refs","detail","getArea","onSave","_this","items","push","isValid","every","item","msg","getErrorMessage","trim","message","onDelete","_this2","confirm","title","then","catch","getValues","$nextTick","setAddressDetail","onDetailBlur","_this3","setTimeout","genSetDefaultCell","h","_this4","slots","rightIcon","change","event","callback","$$v","$set","render","_this5","click","selectSearch","cancel"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\n// Utils\nimport { createNamespace, isObject } from '../utils';\nimport { isMobile } from '../utils/validate/mobile'; // Components\n\nimport Area from '../area';\nimport Cell from '../cell';\nimport Field from '../field';\nimport Popup from '../popup';\nimport Toast from '../toast';\nimport Button from '../button';\nimport Dialog from '../dialog';\nimport Detail from './Detail';\nimport Switch from '../switch';\n\nvar _createNamespace = createNamespace('address-edit'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nvar defaultData = {\n  name: '',\n  tel: '',\n  country: '',\n  province: '',\n  city: '',\n  county: '',\n  areaCode: '',\n  postalCode: '',\n  addressDetail: '',\n  isDefault: false\n};\n\nfunction isPostal(value) {\n  return /^\\d{6}$/.test(value);\n}\n\nexport default createComponent({\n  props: {\n    areaList: Object,\n    isSaving: Boolean,\n    isDeleting: Boolean,\n    validator: Function,\n    showDelete: Boolean,\n    showPostal: Boolean,\n    searchResult: Array,\n    telMaxlength: [Number, String],\n    showSetDefault: Boolean,\n    saveButtonText: String,\n    areaPlaceholder: String,\n    deleteButtonText: String,\n    showSearchResult: Boolean,\n    showArea: {\n      type: Boolean,\n      default: true\n    },\n    showDetail: {\n      type: Boolean,\n      default: true\n    },\n    disableArea: Boolean,\n    detailRows: {\n      type: [Number, String],\n      default: 1\n    },\n    detailMaxlength: {\n      type: [Number, String],\n      default: 200\n    },\n    addressInfo: {\n      type: Object,\n      default: function _default() {\n        return _extends({}, defaultData);\n      }\n    },\n    telValidator: {\n      type: Function,\n      default: isMobile\n    },\n    postalValidator: {\n      type: Function,\n      default: isPostal\n    },\n    areaColumnsPlaceholder: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      data: {},\n      showAreaPopup: false,\n      detailFocused: false,\n      errorInfo: {\n        tel: '',\n        name: '',\n        areaCode: '',\n        postalCode: '',\n        addressDetail: ''\n      }\n    };\n  },\n  computed: {\n    areaListLoaded: function areaListLoaded() {\n      return isObject(this.areaList) && Object.keys(this.areaList).length;\n    },\n    areaText: function areaText() {\n      var _this$data = this.data,\n          country = _this$data.country,\n          province = _this$data.province,\n          city = _this$data.city,\n          county = _this$data.county,\n          areaCode = _this$data.areaCode;\n\n      if (areaCode) {\n        var arr = [country, province, city, county];\n\n        if (province && province === city) {\n          arr.splice(1, 1);\n        }\n\n        return arr.filter(function (text) {\n          return text;\n        }).join('/');\n      }\n\n      return '';\n    },\n    // hide bottom field when use search && detail get focused\n    hideBottomFields: function hideBottomFields() {\n      var searchResult = this.searchResult;\n      return searchResult && searchResult.length && this.detailFocused;\n    }\n  },\n  watch: {\n    addressInfo: {\n      handler: function handler(val) {\n        this.data = _extends({}, defaultData, val);\n        this.setAreaCode(val.areaCode);\n      },\n      deep: true,\n      immediate: true\n    },\n    areaList: function areaList() {\n      this.setAreaCode(this.data.areaCode);\n    }\n  },\n  methods: {\n    onFocus: function onFocus(key) {\n      this.errorInfo[key] = '';\n      this.detailFocused = key === 'addressDetail';\n      this.$emit('focus', key);\n    },\n    onChangeDetail: function onChangeDetail(val) {\n      this.data.addressDetail = val;\n      this.$emit('change-detail', val);\n    },\n    onAreaConfirm: function onAreaConfirm(values) {\n      values = values.filter(function (value) {\n        return !!value;\n      });\n\n      if (values.some(function (value) {\n        return !value.code;\n      })) {\n        Toast(t('areaEmpty'));\n        return;\n      }\n\n      this.showAreaPopup = false;\n      this.assignAreaValues();\n      this.$emit('change-area', values);\n    },\n    assignAreaValues: function assignAreaValues() {\n      var area = this.$refs.area;\n\n      if (area) {\n        var detail = area.getArea();\n        detail.areaCode = detail.code;\n        delete detail.code;\n\n        _extends(this.data, detail);\n      }\n    },\n    onSave: function onSave() {\n      var _this = this;\n\n      var items = ['name', 'tel'];\n\n      if (this.showArea) {\n        items.push('areaCode');\n      }\n\n      if (this.showDetail) {\n        items.push('addressDetail');\n      }\n\n      if (this.showPostal) {\n        items.push('postalCode');\n      }\n\n      var isValid = items.every(function (item) {\n        var msg = _this.getErrorMessage(item);\n\n        if (msg) {\n          _this.errorInfo[item] = msg;\n        }\n\n        return !msg;\n      });\n\n      if (isValid && !this.isSaving) {\n        this.$emit('save', this.data);\n      }\n    },\n    getErrorMessage: function getErrorMessage(key) {\n      var value = String(this.data[key] || '').trim();\n\n      if (this.validator) {\n        var message = this.validator(key, value);\n\n        if (message) {\n          return message;\n        }\n      }\n\n      switch (key) {\n        case 'name':\n          return value ? '' : t('nameEmpty');\n\n        case 'tel':\n          return this.telValidator(value) ? '' : t('telInvalid');\n\n        case 'areaCode':\n          return value ? '' : t('areaEmpty');\n\n        case 'addressDetail':\n          return value ? '' : t('addressEmpty');\n\n        case 'postalCode':\n          return value && !this.postalValidator(value) ? t('postalEmpty') : '';\n      }\n    },\n    onDelete: function onDelete() {\n      var _this2 = this;\n\n      Dialog.confirm({\n        title: t('confirmDelete')\n      }).then(function () {\n        _this2.$emit('delete', _this2.data);\n      }).catch(function () {\n        _this2.$emit('cancel-delete', _this2.data);\n      });\n    },\n    // get values of area component\n    getArea: function getArea() {\n      return this.$refs.area ? this.$refs.area.getValues() : [];\n    },\n    // set area code to area component\n    setAreaCode: function setAreaCode(code) {\n      this.data.areaCode = code || '';\n\n      if (code) {\n        this.$nextTick(this.assignAreaValues);\n      }\n    },\n    // @exposed-api\n    setAddressDetail: function setAddressDetail(value) {\n      this.data.addressDetail = value;\n    },\n    onDetailBlur: function onDetailBlur() {\n      var _this3 = this;\n\n      // await for click search event\n      setTimeout(function () {\n        _this3.detailFocused = false;\n      });\n    },\n    genSetDefaultCell: function genSetDefaultCell(h) {\n      var _this4 = this;\n\n      if (this.showSetDefault) {\n        var slots = {\n          'right-icon': function rightIcon() {\n            return h(Switch, {\n              \"attrs\": {\n                \"size\": \"24\"\n              },\n              \"on\": {\n                \"change\": function change(event) {\n                  _this4.$emit('change-default', event);\n                }\n              },\n              \"model\": {\n                value: _this4.data.isDefault,\n                callback: function callback($$v) {\n                  _this4.$set(_this4.data, \"isDefault\", $$v);\n                }\n              }\n            });\n          }\n        };\n        return h(Cell, {\n          \"directives\": [{\n            name: \"show\",\n            value: !this.hideBottomFields\n          }],\n          \"attrs\": {\n            \"center\": true,\n            \"title\": t('defaultAddress')\n          },\n          \"class\": bem('default'),\n          \"scopedSlots\": slots\n        });\n      }\n\n      return h();\n    }\n  },\n  render: function render(h) {\n    var _this5 = this;\n\n    var data = this.data,\n        errorInfo = this.errorInfo,\n        disableArea = this.disableArea,\n        hideBottomFields = this.hideBottomFields;\n\n    var onFocus = function onFocus(name) {\n      return function () {\n        return _this5.onFocus(name);\n      };\n    };\n\n    return h(\"div\", {\n      \"class\": bem()\n    }, [h(\"div\", {\n      \"class\": bem('fields')\n    }, [h(Field, {\n      \"attrs\": {\n        \"clearable\": true,\n        \"label\": t('name'),\n        \"placeholder\": t('namePlaceholder'),\n        \"errorMessage\": errorInfo.name\n      },\n      \"on\": {\n        \"focus\": onFocus('name')\n      },\n      \"model\": {\n        value: data.name,\n        callback: function callback($$v) {\n          _this5.$set(data, \"name\", $$v);\n        }\n      }\n    }), h(Field, {\n      \"attrs\": {\n        \"clearable\": true,\n        \"type\": \"tel\",\n        \"label\": t('tel'),\n        \"maxlength\": this.telMaxlength,\n        \"placeholder\": t('telPlaceholder'),\n        \"errorMessage\": errorInfo.tel\n      },\n      \"on\": {\n        \"focus\": onFocus('tel')\n      },\n      \"model\": {\n        value: data.tel,\n        callback: function callback($$v) {\n          _this5.$set(data, \"tel\", $$v);\n        }\n      }\n    }), h(Field, {\n      \"directives\": [{\n        name: \"show\",\n        value: this.showArea\n      }],\n      \"attrs\": {\n        \"readonly\": true,\n        \"clickable\": !disableArea,\n        \"label\": t('area'),\n        \"placeholder\": this.areaPlaceholder || t('areaPlaceholder'),\n        \"errorMessage\": errorInfo.areaCode,\n        \"rightIcon\": !disableArea ? 'arrow' : null,\n        \"value\": this.areaText\n      },\n      \"on\": {\n        \"focus\": onFocus('areaCode'),\n        \"click\": function click() {\n          _this5.$emit('click-area');\n\n          _this5.showAreaPopup = !disableArea;\n        }\n      }\n    }), h(Detail, {\n      \"directives\": [{\n        name: \"show\",\n        value: this.showDetail\n      }],\n      \"attrs\": {\n        \"focused\": this.detailFocused,\n        \"value\": data.addressDetail,\n        \"errorMessage\": errorInfo.addressDetail,\n        \"detailRows\": this.detailRows,\n        \"detailMaxlength\": this.detailMaxlength,\n        \"searchResult\": this.searchResult,\n        \"showSearchResult\": this.showSearchResult\n      },\n      \"on\": {\n        \"focus\": onFocus('addressDetail'),\n        \"blur\": this.onDetailBlur,\n        \"input\": this.onChangeDetail,\n        \"select-search\": function selectSearch(event) {\n          _this5.$emit('select-search', event);\n        }\n      }\n    }), this.showPostal && h(Field, {\n      \"directives\": [{\n        name: \"show\",\n        value: !hideBottomFields\n      }],\n      \"attrs\": {\n        \"type\": \"tel\",\n        \"maxlength\": \"6\",\n        \"label\": t('postal'),\n        \"placeholder\": t('postal'),\n        \"errorMessage\": errorInfo.postalCode\n      },\n      \"on\": {\n        \"focus\": onFocus('postalCode')\n      },\n      \"model\": {\n        value: data.postalCode,\n        callback: function callback($$v) {\n          _this5.$set(data, \"postalCode\", $$v);\n        }\n      }\n    }), this.slots()]), this.genSetDefaultCell(h), h(\"div\", {\n      \"directives\": [{\n        name: \"show\",\n        value: !hideBottomFields\n      }],\n      \"class\": bem('buttons')\n    }, [h(Button, {\n      \"attrs\": {\n        \"block\": true,\n        \"round\": true,\n        \"loading\": this.isSaving,\n        \"type\": \"danger\",\n        \"text\": this.saveButtonText || t('save')\n      },\n      \"on\": {\n        \"click\": this.onSave\n      }\n    }), this.showDelete && h(Button, {\n      \"attrs\": {\n        \"block\": true,\n        \"round\": true,\n        \"loading\": this.isDeleting,\n        \"text\": this.deleteButtonText || t('delete')\n      },\n      \"on\": {\n        \"click\": this.onDelete\n      }\n    })]), h(Popup, {\n      \"attrs\": {\n        \"round\": true,\n        \"position\": \"bottom\",\n        \"lazyRender\": false,\n        \"getContainer\": \"body\"\n      },\n      \"model\": {\n        value: _this5.showAreaPopup,\n        callback: function callback($$v) {\n          _this5.showAreaPopup = $$v;\n        }\n      }\n    }, [h(Area, {\n      \"ref\": \"area\",\n      \"attrs\": {\n        \"value\": data.areaCode,\n        \"loading\": !this.areaListLoaded,\n        \"areaList\": this.areaList,\n        \"columnsPlaceholder\": this.areaColumnsPlaceholder\n      },\n      \"on\": {\n        \"confirm\": this.onAreaConfirm,\n        \"cancel\": function cancel() {\n          _this5.showAreaPopup = false;\n        }\n      }\n    })])]);\n  }\n});"]},"metadata":{},"sourceType":"module"}