{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Lisp/Desktop/items/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getArticleList } from \"@/api/getListApi\";\nimport { Random } from \"@/utils/toolFn\";\nexport default {\n  name: \"search-history\",\n  data: function data() {\n    return {\n      isSwitch: true,\n      isChange: false,\n      history: [],\n      last: [],\n      loveData: []\n    };\n  },\n  created: function created() {\n    this.SearchFound();\n  },\n  methods: {\n    SearchFound: function SearchFound() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var id, _yield$getArticleList, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                id = Random({\n                  min: 1,\n                  max: 26,\n                  first: true,\n                  last: _this.last\n                });\n                _context.prev = 1;\n                _context.next = 4;\n                return getArticleList({\n                  channel_id: id,\n                  timestamp: Date.now()\n                });\n\n              case 4:\n                _yield$getArticleList = _context.sent;\n                data = _yield$getArticleList.data.data;\n                _this.loveData = data.results;\n                console.log(_this.loveData);\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n\n                _this.$toast(\"加载失败，请重试\");\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 10]]);\n      }))();\n    },\n    ChangeLoveData: function ChangeLoveData() {\n      var _this2 = this;\n\n      this.isChange = true;\n      this.SearchFound();\n      setTimeout(function () {\n        return _this2.isChange = false;\n      }, 500);\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AAEA;AACAA,wBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,oBADA;AAEAC,qBAFA;AAGAC,iBAHA;AAIAC,cAJA;AAKAC;AALA;AAOA,GAVA;AAWAC,SAXA,qBAWA;AACA;AACA,GAbA;AAcAC;AACAC,eADA,yBACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACAC,kBADA,GACAC;AACAC,wBADA;AAEAC,yBAFA;AAGAC,6BAHA;AAIAT;AAJA,kBADA;AAAA;AAAA;AAAA,uBAWAU;AACAC,gCADA;AAEAC;AAFA,kBAXA;;AAAA;AAAA;AAUAhB,oBAVA,yBAUAA,IAVA,CAUAA,IAVA;AAeA;AACAiB;AAhBA;AAAA;;AAAA;AAAA;AAAA;;AAkBA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBA,KArBA;AAsBAC,kBAtBA,4BAsBA;AAAA;;AACA;AACA;AACAC;AAAA;AAAA;AACA;AA1BA;AAdA","names":["name","data","isSwitch","isChange","history","last","loveData","created","methods","SearchFound","id","Random","min","max","first","getArticleList","channel_id","timestamp","console","ChangeLoveData","setTimeout"],"sourceRoot":"src/views/search/search-comp","sources":["search-history.vue"],"sourcesContent":["<template>\r\n    <div class=\"search-history\">\r\n        <van-cell :border=\"false\">\r\n            <template #title>\r\n                <div>历史搜索</div>\r\n            </template>\r\n            <template #right-icon>\r\n                <van-icon v-if=\"isSwitch\" name=\"delete-o\" size=\"20px\" @click=\"isSwitch=!isSwitch\" />\r\n                <div v-else>\r\n                    <span class=\"text\">全部清除</span>\r\n                    <span class=\"text\" @click=\"isSwitch=!isSwitch\">完成</span>\r\n                </div>\r\n            </template>\r\n        </van-cell>\r\n\r\n        <van-cell class=\"history-content\">\r\n            <template>\r\n                <van-button\r\n                    v-for=\"(btn,i) in history\"\r\n                    :key=\"i\"\r\n                    round\r\n                    icon=\"cross\"\r\n                    icon-position=\"right\"\r\n                >{{btn}}</van-button>\r\n            </template>\r\n        </van-cell>\r\n\r\n        <van-cell :border=\"false\">\r\n            <template #title>\r\n                <div>搜索发现</div>\r\n            </template>\r\n            <template #right-icon>\r\n                <div class=\"serch-txt\" @click=\"throttle(ChangeLoveData,1000)\">\r\n                    <svg\r\n                        t=\"1647079300415\"\r\n                        class=\"icon\"\r\n                        :class=\"{'rotate-center':isChange}\"\r\n                        viewBox=\"0 0 1024 1024\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        p-id=\"1728\"\r\n                    >\r\n                        <path\r\n                            d=\"M265.6 441.6c1.28 0.64 2.56 0.64 3.84 0.64 7.04 0 13.44-4.48 15.36-12.16 28.8-107.52 126.72-183.04 238.08-183.04 83.84 0 159.36 41.6 204.16 108.16l-42.88 21.12 104.96 71.04 8.96-126.72-42.24 20.48c-50.56-77.44-136.96-126.08-232.96-126.08-126.08 0-236.8 85.12-269.44 206.72-1.28 8.96 3.84 17.92 12.16 19.84zM783.36 534.4c-8.32-1.92-17.28 3.84-19.2 12.16-24.32 112.64-125.44 193.92-241.28 193.92-96 0-181.12-55.04-221.44-138.24l44.8-21.76-104.96-71.04-8.96 126.72 40.32-19.84c46.08 94.08 142.08 156.16 250.24 156.16 130.56 0 244.48-92.16 272-219.52 2.56-8.32-2.56-16.64-11.52-18.56z\"\r\n                            fill\r\n                            p-id=\"1729\"\r\n                        />\r\n                    </svg>\r\n                    <span class=\"text txt\">换一换</span>\r\n                </div>\r\n            </template>\r\n        </van-cell>\r\n        <van-cell class=\"history-content\">\r\n            <template>\r\n                <!-- <van-button\r\n                    v-for=\"(btnData,i) in loveData\"\r\n                    :key=\"i\"\r\n                    round\r\n                    icon=\"cross\"\r\n                    icon-position=\"right\"\r\n                >\r\n                <span class=\"van-ellipsis\">{{btnData.title}}...</span></van-button> -->\r\n\r\n                <van-grid clickable :column-num=\"2\" :border=\"false\">\r\n                    <van-grid-item v-for=\"(btnData,i) in loveData\" \r\n                                   :key=\"i\"\r\n                                   class=\"van-ellipsis  van-button--normal van-button--round van-button--default\"\r\n                                   \r\n                    >\r\n                    <div slot=\"text\" class=\"van-ellipsis insettxt \">{{btnData.title}}</div>\r\n                    </van-grid-item>\r\n                </van-grid> \r\n                \r\n                    <!-- <van-icon name=\"cross\" /> -->\r\n\r\n                    <!-- {{btnData.title}}<van-icon name=\"cross\" /> -->\r\n                \r\n                <!-- .van-button--round  .van-button--default -->\r\n            </template>\r\n        </van-cell>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getArticleList } from \"@/api/getListApi\";\r\nimport { Random } from \"@/utils/toolFn\";\r\n\r\nexport default {\r\n    name: \"search-history\",\r\n    data() {\r\n        return {\r\n            isSwitch: true,\r\n            isChange: false,\r\n            history: [],\r\n            last: [],\r\n            loveData: [],\r\n        };\r\n    },\r\n    created() {\r\n        this.SearchFound();\r\n    },\r\n    methods: {\r\n        async SearchFound() {\r\n            const id = Random({\r\n                min: 1,\r\n                max: 26,\r\n                first: true,\r\n                last: this.last,\r\n            });\r\n\r\n            try {\r\n                const {\r\n                    data: { data },\r\n                } = await getArticleList({\r\n                    channel_id: id,\r\n                    timestamp: Date.now(),\r\n                });\r\n                this.loveData = data.results;\r\n                console.log(this.loveData);\r\n            } catch {\r\n                this.$toast(\"加载失败，请重试\");\r\n            }\r\n        },\r\n        ChangeLoveData() {\r\n            this.isChange = true;\r\n            this.SearchFound();\r\n            setTimeout(() => (this.isChange = false), 500);\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-history {\r\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\r\n        Ubuntu, Cantarell, \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\",\r\n        sans-serif;\r\n    .text:first-child {\r\n        padding: 0 30px;\r\n        color: #777;\r\n    }\r\n    .text:last-child {\r\n        padding-left: 15px;\r\n        color: #777;\r\n    }\r\n    .van-cell {\r\n        padding-right: 15px;   // .van-grid-item__content\r\n    }\r\n    .van-button {\r\n        color: #777;\r\n        height: 70px;\r\n        font-size: 24px;\r\n        margin: 7px;\r\n        .van-button__icon {\r\n            margin-left: 20px;\r\n        }\r\n    }\r\n    /deep/ .history-content {\r\n        padding-top: 0 !important;\r\n        .van-grid-item{\r\n            margin:12px 0;\r\n        }\r\n        .van-grid-item__content{\r\n            height: 70px;\r\n            padding: 0;\r\n            line-height: 70px;\r\n\r\n        }\r\n        .van-grid-item__content--center{\r\n            align-items: normal;\r\n            color: #777;\r\n            text-align: left;\r\n            // line-height: 70px;\r\n            // padding-left:10px;\r\n            font-size: 24px;\r\n\r\n        }\r\n    }\r\n    .icon {\r\n        width: 54px;\r\n        height: 50px;\r\n        color: #777;\r\n        animation: circles all 2s linear;\r\n    }\r\n    .serch-txt {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        .txt {\r\n            font-size: 24px;\r\n            padding-left: 0;\r\n        }\r\n    }\r\n    /* 换一换 图标动画 */\r\n    .rotate-center {\r\n        -webkit-animation: rotate-center 0.6s linear both;\r\n        animation: rotate-center 0.6s linear both;\r\n    }\r\n   \r\n\r\n    @-webkit-keyframes rotate-center {\r\n        0% {\r\n            -webkit-transform: rotate(0);\r\n            transform: rotate(0);\r\n        }\r\n        100% {\r\n            -webkit-transform: rotate(360deg);\r\n            transform: rotate(360deg);\r\n        }\r\n    }\r\n    @keyframes rotate-center {\r\n        0% {\r\n            -webkit-transform: rotate(0);\r\n            transform: rotate(0);\r\n        }\r\n        100% {\r\n            -webkit-transform: rotate(540deg);\r\n            transform: rotate(540deg);\r\n        }\r\n    }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}