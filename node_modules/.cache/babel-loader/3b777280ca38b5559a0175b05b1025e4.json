{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Lisp/Desktop/items/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { changeusermessage } from \"@/api/users\";\nimport dayjs from \"dayjs\";\nexport default {\n  props: [\"value\"],\n  data: function data() {\n    return {\n      minDate: new Date(1975, 0, 1),\n      maxDate: new Date(2025, 10, 1),\n      currentDate: new Date(this.value)\n    };\n  },\n  methods: {\n    onConfirm: function onConfirm() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var currentDate;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.$toast.loading({\n                  message: \"保存中...\",\n                  forbidClick: true,\n                  // 静止背景点击\n                  duration: 0\n                });\n\n                _context.prev = 1;\n                currentDate = dayjs(_this.currentDate).format(\"YYYY-MM-DD\");\n                _context.next = 5;\n                return changeusermessage({\n                  birthday: currentDate\n                });\n\n              case 5:\n                _this.$emit(\"input\", currentDate);\n\n                _this.$emit(\"close\");\n\n                _this.$toast.success(\"修改成功\");\n\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n\n                _this.$toast.fail(\"修改失败，请重试\");\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 10]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;AAeA;AAEA;AAEA;AACAA,kBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,mCADA;AAEAC,oCAFA;AAGAC;AAHA;AAKA,GARA;AASAC;AACAC,aADA,uBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACAC,mCADA;AAEAC,mCAFA;AAEA;AACAC;AAHA;;AADA;AAOAL,2BAPA,GAOAM,6CAPA;AAAA;AAAA,uBASAC;AACAC;AADA,kBATA;;AAAA;AAYA;;AACA;;AACA;;AAdA;AAAA;;AAAA;AAAA;AAAA;;AAgBA;;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AAnBA;AATA","names":["props","data","minDate","maxDate","currentDate","methods","onConfirm","message","forbidClick","duration","dayjs","changeusermessage","birthday"],"sourceRoot":"src/views/userProfile/components","sources":["updateBirthday.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-datetime-picker\r\n      v-model=\"currentDate\"\r\n      type=\"date\"\r\n      title=\"选择年月日\"\r\n      :min-date=\"minDate\"\r\n      :max-date=\"maxDate\"\r\n      @cancel=\"$emit('close')\"\r\n      @confirm=\"onConfirm\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { changeusermessage } from \"@/api/users\";\r\n\r\nimport dayjs from \"dayjs\";\r\n\r\nexport default {\r\n  props: [\"value\"],\r\n  data() {\r\n    return {\r\n      minDate: new Date(1975, 0, 1),\r\n      maxDate: new Date(2025, 10, 1),\r\n      currentDate: new Date(this.value),\r\n    };\r\n  },\r\n  methods: {\r\n    async onConfirm() {\r\n      this.$toast.loading({\r\n        message: \"保存中...\",\r\n        forbidClick: true, // 静止背景点击\r\n        duration: 0,\r\n      });\r\n      try {\r\n        let currentDate = dayjs(this.currentDate).format(\"YYYY-MM-DD\");\r\n\r\n        await changeusermessage({\r\n          birthday: currentDate,\r\n        });\r\n        this.$emit(\"input\", currentDate);\r\n        this.$emit(\"close\");\r\n        this.$toast.success(\"修改成功\");\r\n      } catch (err) {\r\n        this.$toast.fail(\"修改失败，请重试\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}